{"version":3,"sources":["components/logo.js","contexts/AppContext.js","components/LoremIpsum.js","components/content.js","components/StaticPage.js","pages/how.js","components/AutoCompletionItem.js","components/search.js","api/callAutocomplete.js","api/ganify.js","api/cancelablePromise.js","api/geotag.js","components/GoogleView.js","api/googleMapLocationControl.js","components/AddressManager.js","pages/act.js","pages/ganifyResult.js","pages/home.js","components/ExternalLink.js","pages/about.js","pages/contact.js","components/MenuLink.js","App.js","serviceWorker.js","index.js"],"names":["Logo","alt","src","process","voidFunction","AppContextInstance","pageLoader","google","this","geocoder","maps","Geocoder","autocomplete","places","AutocompleteService","locationToAddress","bind","addressToLocation","position","Promise","resolve","reject","geocode","latLng","results","status","GeocoderStatus","OK","formatted_address","address","geometry","location","AppContext","React","createContext","LoremIpsum","Component","Content","className","props","children","StaticPage","name","title","How","contextType","AutoCompletionItem","active","onClick","value","Search","state","submitting","windowGotFocus","onInputFocus","onInputBlur","onAddressChanged","onKeyDown","onSubmitAddress","choosePlace","hasPlaces","onCompletionFocus","onCompletionBlur","turnSubmittingFlag","setWindowFocus","unsetWindowFocus","setState","event","onChange","search","autocompleteHasFocus","target","update","error","currentFocus","then","googleContext","onresult","onerror","addressForUrl","getQueryPredictions","input","predictions","PlacesServiceStatus","descriptions","forEach","prediction","push","description","Error","callAutocomplete","context","console","log","nbPlaces","length","preventDefault","addressChanged","keyCode","onSelect","elemId","caretPos","element","document","getElementById","createTextRange","range","move","select","undefined","selectionStart","setSelectionRange","focus","setCaretPosition","onSubmit","stopDisplaying","id","autoComplete","htmlFor","icon","SearchIcon","type","placeholder","onFocus","onBlur","onMouseEnter","onMouseLeave","map","place","i","key","disabled","window","addEventListener","removeEventListener","promiseGanify","encodeURI","apiCall","Math","random","axios","method","url","responseType","reponse","reader","FileReader","readAsDataURL","data","onloadend","result","catch","ganify","CancelablePromise","promise","isCanceled","val","cancel","geolocationError","message","GoogleView","currentAddress","currentMarker","streetPositionIsManual","defaultPosition","currentCircle","geolocation","userAddress","displayStreet","displayMap","markMapOn","centerMap","centerStreet","getUserLocation","onMapClick","getStreetView","getVisible","setVisible","query","nearLocation","request","fields","locationBias","Circle","center","radius","findPlaceFromQuery","pos1","pos2","setMap","Marker","displayUserRegions","lat","lng","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","addListener","ev","panTo","setPosition","Map","zoom","streetViewControl","PlacesService","getLocation","searchAddress","streetControl","createElement","classList","add","textContent","index","getPosition","controls","ControlPosition","TOP_LEFT","geolocationControl","ReactDOM","render","xmlns","width","height","viewBox","d","RIGHT_CENTER","addGoogleMapLocationControl","streetIsVisible","LatLng","_createMapOn","guessInitialLocation","prevProps","prevState","snapshot","cancelablePromise","navigator","getCurrentPosition","coords","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","UNKNOWN_ERROR","latitude","longitude","exception","finally","AddressManager","initialAddress","wait","selectedAddress","onSearchChange","onSelectSearchAddress","onSearchSubmit","onSelectMapAddress","onSubmitted","newState","css","margin","showMap","Act","GanifyResult","initialResult","image","original","flooded","metadata","warning","JSON","parse","atob","substr","Object","values","sort","m1","m2","localeCompare","guessLocation","leftImage","rightImage","leftImageAlt","rightImageAlt","entry","Home","ExternalLink","rel","href","About","Contact","MenuLink","classNames","nav","pageName","currentPage","join","pageContent","App","body","loadGoogleContext","Provider","async","defer","onLoad","Boolean","hostname","match","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.acd03c3a.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport function Logo() {\r\n\treturn (\r\n\t\t<img alt=\"cc-ai logo\" src={process.env.PUBLIC_URL + '/logo.svg'}/>\r\n\t);\r\n}\r\n","import React from 'react';\r\n\r\nfunction voidFunction() {}\r\n\r\nexport class AppContextInstance {\r\n\tconstructor(pageLoader, google) {\r\n\t\tthis.pageLoader = pageLoader || voidFunction;\r\n\t\tthis.google = google || null;\r\n\t\tthis.geocoder = google ? new google.maps.Geocoder() : null;\r\n\t\tthis.autocomplete = google ? new google.maps.places.AutocompleteService() : null;\r\n\t\tthis.locationToAddress = this.locationToAddress.bind(this);\r\n\t\tthis.addressToLocation = this.addressToLocation.bind(this);\r\n\t}\r\n\r\n\tlocationToAddress(position) {\r\n\t\t// resolve(address)\r\n\t\t// reject(status)\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.geocoder.geocode({latLng: position}, (results, status) => {\r\n\t\t\t\tif (status === this.google.maps.GeocoderStatus.OK)\r\n\t\t\t\t\tresolve(results[0].formatted_address);\r\n\t\t\t\telse\r\n\t\t\t\t\treject(status);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\taddressToLocation(address) {\r\n\t\t// resolve(latLngObject)\r\n\t\t// reject(status)\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.geocoder.geocode({address: address}, (results, status) => {\r\n\t\t\t\tif (status === this.google.maps.GeocoderStatus.OK)\r\n\t\t\t\t\tresolve(results[0].geometry.location);\r\n\t\t\t\telse\r\n\t\t\t\t\treject(status);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport const AppContext = React.createContext(new AppContextInstance(null, null));\r\n","import React from 'react';\r\n\r\nexport class LoremIpsum extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus. Suspendisse lectus tortor,\r\n\t\t\t\t\tdignissim sit amet, adipiscing nec, ultricies sed, dolor. Cras elementum ultrices diam. Maecenas\r\n\t\t\t\t\tligula massa, varius a, semper congue, euismod non, mi. Proin porttitor, orci nec nonummy molestie,\r\n\t\t\t\t\tenim est eleifend mi, non fermentum diam nisl sit amet erat. Duis semper. Duis arcu massa,\r\n\t\t\t\t\tscelerisque vitae, consequat in, pretium a, enim. Pellentesque congue. Ut in risus volutpat libero\r\n\t\t\t\t\tpharetra tempor. Cras vestibulum bibendum augue. Praesent egestas leo in pede. Praesent blandit\r\n\t\t\t\t\todio eu enim. Pellentesque sed dui ut augue blandit sodales. Vestibulum ante ipsum primis in\r\n\t\t\t\t\tfaucibus orci luctus et ultrices posuere cubilia Curae; Aliquam nibh. Mauris ac mauris sed pede\r\n\t\t\t\t\tpellentesque fermentum. Maecenas adipiscing ante non diam sodales hendrerit.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tUt velit mauris, egestas sed, gravida nec, ornare ut, mi. Aenean ut orci vel massa suscipit\r\n\t\t\t\t\tpulvinar. Nulla sollicitudin. Fusce varius, ligula non tempus aliquam, nunc turpis ullamcorper\r\n\t\t\t\t\tnibh, in tempus sapien eros vitae ligula. Pellentesque rhoncus nunc et augue. Integer id felis.\r\n\t\t\t\t\tCurabitur aliquet pellentesque diam. Integer quis metus vitae elit lobortis egestas. Lorem ipsum\r\n\t\t\t\t\tdolor sit amet, consectetuer adipiscing elit. Morbi vel erat non mauris convallis vehicula. Nulla\r\n\t\t\t\t\tet sapien. Integer tortor tellus, aliquam faucibus, convallis id, congue eu, quam. Mauris\r\n\t\t\t\t\tullamcorper felis vitae erat. Proin feugiat, augue non elementum posuere, metus purus iaculis\r\n\t\t\t\t\tlectus, et tristique ligula justo vitae magna.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tAliquam convallis sollicitudin purus. Praesent aliquam, enim at fermentum mollis, ligula massa\r\n\t\t\t\t\tadipiscing nisl, ac euismod nibh nisl eu lectus. Fusce vulputate sem at sapien. Vivamus leo.\r\n\t\t\t\t\tAliquam euismod libero eu enim. Nulla nec felis sed leo placerat imperdiet. Aenean suscipit nulla\r\n\t\t\t\t\tin justo. Suspendisse cursus rutrum augue. Nulla tincidunt tincidunt mi. Curabitur iaculis, lorem\r\n\t\t\t\t\tvel rhoncus faucibus, felis magna fermentum augue, et ultricies lacus lorem varius purus.\r\n\t\t\t\t\tCurabitur eu amet.\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport class Content extends React.Component {\r\n\trender() {\r\n\t\treturn <div className={`${this.props.className} mt-5 pt-5`}>{this.props.children}</div>;\r\n\t}\r\n}\r\n\r\nContent.propTypes = {\r\n\tclassName: PropTypes.string\r\n};\r\n","import React from 'react';\r\nimport {Helmet} from 'react-helmet-async';\r\nimport PropTypes from 'prop-types';\r\nimport {Content} from \"./content\";\r\n\r\nexport class StaticPage extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Content className={this.props.name}>\r\n\t\t\t\t<Helmet>\r\n\t\t\t\t\t<title>{this.props.title} | CC-AI</title>\r\n\t\t\t\t</Helmet>\r\n\t\t\t\t<h1>{this.props.title}</h1>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</Content>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nStaticPage.propTypes = {\r\n\ttitle: PropTypes.string.isRequired,\r\n\tname: PropTypes.string.isRequired\r\n};\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {LoremIpsum} from \"../components/LoremIpsum\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\n\r\nexport class How extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'how'} title={'How it works'}>\r\n\t\t\t\t<LoremIpsum/>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nHow.contextType = AppContext;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport class AutoCompletionItem extends React.Component {\r\n\trender() {\r\n\t\t// autocomplete-active\r\n\t\treturn (\r\n\t\t\t<div {...(this.props.active ? {className: 'autocomplete-active'} : {})}\r\n\t\t\t\t {...(this.props.onClick ? {onClick: this.props.onClick} : {})}>\r\n\t\t\t\t{this.props.value}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAutoCompletionItem.propTypes = {\r\n\tvalue: PropTypes.string.isRequired,\r\n\tactive: PropTypes.bool.isRequired,\r\n\tonClick: PropTypes.func\r\n};\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport Octicon, {Search as SearchIcon} from '@primer/octicons-react';\r\nimport {callAutocomplete} from \"../api/callAutocomplete\";\r\nimport {AutoCompletionItem} from \"./AutoCompletionItem\";\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction setCaretPosition(elemId, caretPos) {\r\n\t// Reference (2019/06/13): https://stackoverflow.com/a/512542\r\n\tvar element = document.getElementById(elemId);\r\n\tif (!element)\r\n\t\treturn;\r\n\tif (element.createTextRange) {\r\n\t\tvar range = element.createTextRange();\r\n\t\trange.move('character', caretPos);\r\n\t\trange.select();\r\n\t} else if (element.selectionStart !== undefined) {\r\n\t\telement.setSelectionRange(caretPos, caretPos);\r\n\t} else {\r\n\t\telement.focus();\r\n\t}\r\n}\r\n\r\nexport class Search extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tsubmitting: false,\r\n\t\t\twindowGotFocus: false,\r\n\t\t};\r\n\t\tthis.onInputFocus = this.onInputFocus.bind(this);\r\n\t\tthis.onInputBlur = this.onInputBlur.bind(this);\r\n\t\tthis.onAddressChanged = this.onAddressChanged.bind(this);\r\n\t\tthis.onKeyDown = this.onKeyDown.bind(this);\r\n\t\tthis.onSubmitAddress = this.onSubmitAddress.bind(this);\r\n\t\tthis.choosePlace = this.choosePlace.bind(this);\r\n\t\tthis.hasPlaces = this.hasPlaces.bind(this);\r\n\t\tthis.onCompletionFocus = this.onCompletionFocus.bind(this);\r\n\t\tthis.onCompletionBlur = this.onCompletionBlur.bind(this);\r\n\t\tthis.turnSubmittingFlag = this.turnSubmittingFlag.bind(this);\r\n\t\tthis.setWindowFocus = this.setWindowFocus.bind(this);\r\n\t\tthis.unsetWindowFocus = this.unsetWindowFocus.bind(this);\r\n\t}\r\n\r\n\tsetState(state) {\r\n\t\treturn new Promise(resolve => super.setState(state, resolve));\r\n\t}\r\n\r\n\tturnSubmittingFlag() {\r\n\t\treturn this.setState({submitting: !this.state.submitting});\r\n\t}\r\n\r\n\tonInputFocus(event) {\r\n\t\tif (this.state.windowGotFocus) {\r\n\t\t\tthis.unsetWindowFocus();\r\n\t\t} else {\r\n\t\t\tthis.props.onChange({autocomplete: true});\r\n\t\t}\r\n\t}\r\n\r\n\tonInputBlur() {\r\n\t\tif (!this.props.search.autocompleteHasFocus)\r\n\t\t\tthis.props.onChange({autocomplete: false});\r\n\t}\r\n\r\n\tonCompletionFocus() {\r\n\t\tthis.props.onChange({autocompleteHasFocus: true});\r\n\t}\r\n\r\n\tonCompletionBlur() {\r\n\t\tthis.props.onChange({autocompleteHasFocus: false});\r\n\t}\r\n\r\n\tonAddressChanged(event) {\r\n\t\tconst value = event.target.value;\r\n\t\tconst update = {address: value, error: '', currentFocus: -1, autocomplete: true};\r\n\t\tif (!value)\r\n\t\t\tupdate.places = [];\r\n\t\tthis.props.onChange(update).then(() => {\r\n\t\t\tif (value) {\r\n\t\t\t\tcallAutocomplete(value, this.context, results => {\r\n\t\t\t\t\tthis.props.onChange({places: results});\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\tthis.props.onChange({places: []});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonKeyDown(event) {\r\n\t\tif (!this.hasPlaces())\r\n\t\t\treturn;\r\n\t\tconst nbPlaces = this.props.search.places.length;\r\n\t\tlet preventDefault = false;\r\n\t\tlet addressChanged = false;\r\n\t\tlet address = this.props.search.address;\r\n\t\tlet currentFocus = this.props.search.currentFocus;\r\n\t\tlet autocomplete = this.props.search.autocomplete;\r\n\t\tlet autocompleteHasFocus = this.props.search.autocompleteHasFocus;\r\n\t\tif (event.keyCode === 13) { // enter\r\n\t\t\t/*If the ENTER key is pressed, prevent the form from being submitted,*/\r\n\t\t\tconsole.log('ENTER');\r\n\t\t\tif (autocomplete && currentFocus !== -1) {\r\n\t\t\t\taddress = this.props.search.places[currentFocus];\r\n\t\t\t\taddressChanged = preventDefault = true;\r\n\t\t\t}\r\n\t\t\tautocomplete = autocompleteHasFocus = false;\r\n\t\t} else if (event.keyCode === 27) { // escape\r\n\t\t\tconsole.log('ESCAPE');\r\n\t\t\tautocomplete = autocompleteHasFocus = false;\r\n\t\t} else if (event.keyCode === 40) { // down\r\n\t\t\tconsole.log('DOWN');\r\n\t\t\t/*If the arrow DOWN key is pressed, increase the currentFocus variable:*/\r\n\t\t\t++currentFocus;\r\n\t\t\tif (currentFocus >= nbPlaces)\r\n\t\t\t\tcurrentFocus = 0;\r\n\t\t\tautocomplete = preventDefault = true;\r\n\t\t} else if (event.keyCode === 38) { //up\r\n\t\t\tconsole.log('UP');\r\n\t\t\t/*If the arrow UP key is pressed, decrease the currentFocus variable:*/\r\n\t\t\t--currentFocus;\r\n\t\t\tif (currentFocus < 0)\r\n\t\t\t\tcurrentFocus = nbPlaces - 1;\r\n\t\t\tautocomplete = preventDefault = true;\r\n\t\t}\r\n\t\tif (preventDefault)\r\n\t\t\tevent.preventDefault();\r\n\t\tthis.props.onChange({\r\n\t\t\taddress: address,\r\n\t\t\tcurrentFocus: currentFocus,\r\n\t\t\tautocomplete: autocomplete,\r\n\t\t\tautocompleteHasFocus: autocompleteHasFocus\r\n\t\t}).then(() => {\r\n\t\t\tif (addressChanged && this.props.onSelect)\r\n\t\t\t\tthis.props.onSelect(address);\r\n\t\t});\r\n\t}\r\n\r\n\tonSubmitAddress(event) {\r\n\t\tevent.preventDefault();\r\n\t\tconst address = this.props.search.address;\r\n\t\tsetCaretPosition('inputAddress', 0);\r\n\t\tthis.turnSubmittingFlag()\r\n\t\t\t.then(() => this.props.onSubmit(address))\r\n\t\t\t.then((stopDisplaying) => {\r\n\t\t\t\tif (!stopDisplaying)\r\n\t\t\t\t\tthis.turnSubmittingFlag();\r\n\t\t\t})\r\n\t}\r\n\r\n\tchoosePlace(currentFocus) {\r\n\t\tconst address = this.props.search.places[currentFocus];\r\n\t\tthis.props.onChange({\r\n\t\t\taddress: address,\r\n\t\t\tcurrentFocus: currentFocus,\r\n\t\t\tautocomplete: false,\r\n\t\t\tautocompleteHasFocus: false\r\n\t\t});\r\n\t\tif (this.props.onSelect)\r\n\t\t\tthis.props.onSelect(address);\r\n\t}\r\n\r\n\thasPlaces() {\r\n\t\treturn this.props.search.places.length > 0 && (this.props.search.places.length !== 1 || this.props.search.places[0] !== this.props.search.address);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst address = this.props.search.address;\r\n\t\treturn (\r\n\t\t\t<div className=\"search\">\r\n\t\t\t\t<form id=\"search-form\" onSubmit={this.onSubmitAddress} autoComplete=\"off\">\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col-md-9\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"inputAddress\" className=\"sr-only\">Address</label>\r\n\t\t\t\t\t\t\t<Octicon icon={SearchIcon}/>\r\n\t\t\t\t\t\t\t<div className=\"autocomplete\">\r\n\t\t\t\t\t\t\t\t<input className=\"form-control\"\r\n\t\t\t\t\t\t\t\t\t   id=\"inputAddress\"\r\n\t\t\t\t\t\t\t\t\t   type=\"text\"\r\n\t\t\t\t\t\t\t\t\t   placeholder=\"Search an address\"\r\n\t\t\t\t\t\t\t\t\t   value={address}\r\n\t\t\t\t\t\t\t\t\t   onFocus={this.onInputFocus}\r\n\t\t\t\t\t\t\t\t\t   onBlur={this.onInputBlur}\r\n\t\t\t\t\t\t\t\t\t   onKeyDown={this.onKeyDown}\r\n\t\t\t\t\t\t\t\t\t   onChange={this.onAddressChanged}/>\r\n\t\t\t\t\t\t\t\t{this.props.search.autocomplete && this.hasPlaces() ? (\r\n\t\t\t\t\t\t\t\t\t<div id=\"autocomplete-list\"\r\n\t\t\t\t\t\t\t\t\t\t onMouseEnter={this.onCompletionFocus}\r\n\t\t\t\t\t\t\t\t\t\t onMouseLeave={this.onCompletionBlur}\r\n\t\t\t\t\t\t\t\t\t\t className=\"autocomplete-items\">\r\n\t\t\t\t\t\t\t\t\t\t{this.props.search.places.map((place, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<AutoCompletionItem active={this.props.search.currentFocus === i}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.choosePlace(i)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={place}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}/>))}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t) : ''\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-md-3\">\r\n\t\t\t\t\t\t\t<button className=\"btn btn-secondary btn-lg btn-block py-3\"\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tid=\"submitButton\"\r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.submitting}>\r\n\t\t\t\t\t\t\t\t<strong>Go!</strong>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tsetWindowFocus() {\r\n\t\tthis.setState({windowGotFocus: true});\r\n\t}\r\n\r\n\tunsetWindowFocus() {\r\n\t\tthis.setState({windowGotFocus: false});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\twindow.addEventListener('focus', this.setWindowFocus);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\twindow.removeEventListener('focus', this.setWindowFocus);\r\n\t}\r\n}\r\n\r\nSearch.contextType = AppContext;\r\nSearch.propTypes = {\r\n\tsearch: PropTypes.object.isRequired,\r\n\tonChange: PropTypes.func.isRequired,\r\n\tonSelect: PropTypes.func.isRequired,\r\n\tonSubmit: PropTypes.func.isRequired\r\n};\r\n","export function callAutocomplete(address, googleContext, onresult, onerror) {\r\n\tconst addressForUrl = address;\r\n\t// Add a random string at the end to prevent browser for using the cache.\r\n\tgoogleContext.autocomplete.getQueryPredictions({input: addressForUrl}, (predictions, status) => {\r\n\t\tif (status !== googleContext.google.maps.places.PlacesServiceStatus.OK) {\r\n\t\t\tif (onerror)\r\n\t\t\t\tonerror(new Error(`Unable to get autocompletion for ${addressForUrl}. Status ${status}.`));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst descriptions = [];\r\n\t\tpredictions.forEach(function (prediction) {\r\n\t\t\tdescriptions.push(prediction.description);\r\n\t\t\tif (onresult) {\r\n\t\t\t\tonresult(descriptions);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n","import axios from \"axios\";\r\n\r\nexport function ganify(address, onresult, onerror) {\r\n\t// const addressForUrl = stringToBase64(address);\r\n\tconst addressForUrl = encodeURI(address);\r\n\r\n\t// Remote end point.\r\n\t// const endPoint = 'https://api.climatechangeai.org/address/munit';\r\n\tconst endPoint = 'https://api.climatechangeai.org/flood/munit';\r\n\r\n\t// Local end point.\r\n\t// const endPoint = 'http://localhost:5000/address/01';\r\n\r\n\t// Add a random string at the end to prevent browser for using the cache.\r\n\tconst apiCall = `${endPoint}/${addressForUrl}?${Math.random()}`;\r\n\tconsole.log(`Calling: ${apiCall}`);\r\n\taxios({\r\n\t\tmethod: 'get',\r\n\t\turl: apiCall,\r\n\t\tresponseType: 'blob'\r\n\t})\r\n\t\t.then(reponse => {\r\n\t\t\t// Is this possible?\r\n\t\t\tif (!reponse)\r\n\t\t\t\tthrow new Error(`No images for address ${address}`);\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.readAsDataURL(reponse.data);\r\n\t\t\treader.onloadend = function () {\r\n\t\t\t\tconsole.log(`Images loaded for ${address}`);\r\n\t\t\t\tonresult(reader.result);\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tif (onerror)\r\n\t\t\t\tonerror(error);\r\n\t\t});\r\n}\r\n\r\nexport function promiseGanify(address) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tif (address)\r\n\t\t\tganify(address, resolve, reject);\r\n\t\telse\r\n\t\t\tresolve(null);\r\n\t})\r\n}\r\n","// Inspired from: https://reactjs.org/blog/2015/12/16/ismounted-antipattern.html\r\n\r\nexport class CancelablePromise {\r\n\tconstructor(promise) {\r\n\t\tthis.isCanceled = false;\r\n\t\tthis.promise = new Promise((resolve, reject) => {\r\n\t\t\tpromise.then(\r\n\t\t\t\tval => this.isCanceled ? reject({isCanceled: true}) : resolve(val),\r\n\t\t\t\terror => this.isCanceled ? reject({isCanceled: true}) : reject(error)\r\n\t\t\t);\r\n\t\t});\r\n\t\tthis.cancel = this.cancel.bind(this);\r\n\t}\r\n\r\n\tcancel() {\r\n\t\tthis.isCanceled = true;\r\n\t}\r\n}\r\n","function geolocationError(message) {\r\n\treturn {geolocationError: message};\r\n}\r\n\r\nexport function geotag() {\r\n\t// resolve(coords)\r\n\t// reject(errorMessage)\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tif (\"geolocation\" in navigator) {\r\n\t\t\tnavigator.geolocation.getCurrentPosition(function (position) {\r\n\t\t\t\tresolve(position.coords);\r\n\t\t\t}, function (error) {\r\n\t\t\t\tlet message = null;\r\n\t\t\t\tswitch (error.code) {\r\n\t\t\t\t\tcase error.PERMISSION_DENIED:\r\n\t\t\t\t\t\tmessage = \"Geolocation is not allowed in your browser.\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase error.POSITION_UNAVAILABLE:\r\n\t\t\t\t\t\tmessage = \"Location information is unavailable.\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase error.TIMEOUT:\r\n\t\t\t\t\t\tmessage = \"The request to get user location timed out.\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase error.UNKNOWN_ERROR:\r\n\t\t\t\t\t\tmessage = \"An unknown error occurred.\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tmessage = \"An error occurred without any error code.\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\treject(geolocationError(message));\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(geolocationError(\"Geolocation is not available in your browser.\"));\r\n\t\t}\r\n\t});\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {addGoogleMapLocationControl} from \"../api/googleMapLocationControl\";\r\nimport {CancelablePromise} from \"../api/cancelablePromise\";\r\nimport {geotag} from \"../api/geotag\";\r\n\r\nfunction samePositions(pos1, pos2) {\r\n\treturn pos1.lat() === pos2.lat() && pos1.lng() === pos2.lng();\r\n}\r\n\r\nexport class GoogleView extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.currentAddress = null;\r\n\t\tthis.currentMarker = null;\r\n\t\tthis.streetPositionIsManual = false;\r\n\t\tthis.map = null;\r\n\t\tthis.places = null;\r\n\t\tthis.defaultPosition = null;\r\n\t\tthis.currentCircle = null;\r\n\t\tthis.geolocation = null;\r\n\t\tthis.userAddress = null;\r\n\t\tthis.displayStreet = this.displayStreet.bind(this);\r\n\t\tthis.displayMap = this.displayMap.bind(this);\r\n\t\tthis.markMapOn = this.markMapOn.bind(this);\r\n\t\tthis.centerMap = this.centerMap.bind(this);\r\n\t\tthis.centerStreet = this.centerStreet.bind(this);\r\n\t\tthis.getUserLocation = this.getUserLocation.bind(this);\r\n\t\tthis.onMapClick = this.onMapClick.bind(this);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (<div>\r\n\t\t\t<div id=\"google-map-view\" className=\"my-4\"/>\r\n\t\t</div>);\r\n\t}\r\n\r\n\tstreetIsVisible() {\r\n\t\treturn this.map.getStreetView().getVisible();\r\n\t}\r\n\r\n\tdisplayStreet() {\r\n\t\tconsole.log(`Displaying street.`);\r\n\t\tthis.streetPositionIsManual = true;\r\n\t\tthis.map.getStreetView().setVisible(true);\r\n\t}\r\n\r\n\tdisplayMap() {\r\n\t\tthis.map.getStreetView().setVisible(false);\r\n\t}\r\n\r\n\tsearchAddress(query, nearLocation) {\r\n\t\t// resolve(address)\r\n\t\t// reject(status)\r\n\t\tconst google = this.context.google;\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst request = {\r\n\t\t\t\tquery: query,\r\n\t\t\t\tfields: ['formatted_address', 'geometry', 'name'],\r\n\t\t\t\tlocationBias: new google.maps.Circle({\r\n\t\t\t\t\tcenter: nearLocation,\r\n\t\t\t\t\tradius: 10\r\n\t\t\t\t})\r\n\t\t\t};\r\n\t\t\tthis.places.findPlaceFromQuery(request, (results, status) => {\r\n\t\t\t\tif (status === google.maps.places.PlacesServiceStatus.OK && results.length)\r\n\t\t\t\t\tresolve(results[0].formatted_address);\r\n\t\t\t\telse\r\n\t\t\t\t\treject(status);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tmarkMapOn(position) {\r\n\t\tconst google = this.context.google;\r\n\t\tif (this.currentMarker) {\r\n\t\t\tthis.currentMarker.setMap(null);\r\n\t\t\tthis.currentMarker = null;\r\n\t\t}\r\n\t\tthis.currentMarker = new google.maps.Marker({position: position, map: this.map});\r\n\t\tif (this.currentCircle) {\r\n\t\t\tthis.currentCircle.setMap(null);\r\n\t\t\tthis.currentCircle = null;\r\n\t\t}\r\n\t\tif (this.props.displayUserRegions && samePositions(position, this.geolocation)) {\r\n\t\t\tthis.currentCircle = new google.maps.Circle({\r\n\t\t\t\tstrokeColor: '#00FF00',\r\n\t\t\t\tstrokeOpacity: 0.8,\r\n\t\t\t\tstrokeWeight: 2,\r\n\t\t\t\tfillColor: '#00FF00',\r\n\t\t\t\tfillOpacity: 0.35,\r\n\t\t\t\tmap: this.map,\r\n\t\t\t\tcenter: position,\r\n\t\t\t\tradius: 300, // in meters\r\n\t\t\t});\r\n\t\t\tthis.currentCircle.addListener('click', this.onMapClick);\r\n\t\t}\r\n\t}\r\n\r\n\tonMapClick(ev) {\r\n\t\tconst position = ev.latLng;\r\n\t\tthis.centerMap(position);\r\n\t\tthis.context.locationToAddress(position)\r\n\t\t\t.then(address => {\r\n\t\t\t\tthis.currentAddress = address;\r\n\t\t\t\tthis.props.onSelect(address)\r\n\t\t\t});\r\n\t}\r\n\r\n\tcenterMap(position) {\r\n\t\tconsole.log(`Centering map to ${position.lat()} ; ${position.lng()}`);\r\n\t\tthis.markMapOn(position);\r\n\t\tthis.map.panTo(position);\r\n\t}\r\n\r\n\tcenterStreet(position) {\r\n\t\tconsole.log(`Centering street to ${position.lat()} ; ${position.lng()}`);\r\n\t\tthis.streetPositionIsManual = true;\r\n\t\tthis.map.getStreetView().setPosition(position);\r\n\t}\r\n\r\n\t_createMapOn(defaultPosition) {\r\n\t\tconst google = this.context.google;\r\n\t\tthis.map = new google.maps.Map(document.getElementById('google-map-view'), {\r\n\t\t\tcenter: defaultPosition,\r\n\t\t\tzoom: 15,\r\n\t\t\tstreetViewControl: false,\r\n\t\t});\r\n\t\tthis.places = new google.maps.places.PlacesService(this.map);\r\n\t\tthis.map.addListener('click', this.onMapClick);\r\n\t\tthis.map.getStreetView().addListener('position_changed', () => {\r\n\t\t\tif (this.streetPositionIsManual) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconsole.log(`Handling changed position on street.`);\r\n\t\t\tconst location = this.map.getStreetView().getLocation();\r\n\t\t\tthis.centerMap(location.latLng);\r\n\t\t\tthis.searchAddress(location.description, location.latLng)\r\n\t\t\t\t.then(address => {\r\n\t\t\t\t\tthis.currentAddress = address;\r\n\t\t\t\t\tthis.props.onSelect(address)\r\n\t\t\t\t});\r\n\t\t});\r\n\t\tconst streetControl = document.createElement('div');\r\n\t\tstreetControl.classList.add('google-map-street-button');\r\n\t\tstreetControl.textContent = 'Street';\r\n\t\tstreetControl.index = 1;\r\n\t\tstreetControl.addEventListener('click', () => {\r\n\t\t\tif (this.currentMarker) {\r\n\t\t\t\tconst position = this.currentMarker.getPosition();\r\n\t\t\t\tthis.centerStreet(position);\r\n\t\t\t\tthis.displayStreet();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.map.controls[google.maps.ControlPosition.TOP_LEFT].push(streetControl);\r\n\t\taddGoogleMapLocationControl(google, this.map, this.getUserLocation);\r\n\t\tdocument.getElementById('google-map-view').addEventListener('click', () => {\r\n\t\t\tif (this.streetIsVisible()) {\r\n\t\t\t\tconsole.log(`Clicked on street!`);\r\n\t\t\t\tthis.streetPositionIsManual = false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// Initialization.\r\n\t\tconst google = this.context.google;\r\n\t\t// Use Montreal coordinates as default coordinates.\r\n\t\tconst defaultPosition = new google.maps.LatLng(45.505331312, -73.55249779);\r\n\t\tthis.defaultPosition = defaultPosition;\r\n\t\tif (this.props.address) {\r\n\t\t\tthis.context.addressToLocation(this.props.address)\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tconsole.log(`Error while location for address ${this.props.address}:`, error);\r\n\t\t\t\t\treturn this.defaultPosition;\r\n\t\t\t\t})\r\n\t\t\t\t.then(position => {\r\n\t\t\t\t\tthis.currentAddress = this.props.address;\r\n\t\t\t\t\tthis._createMapOn(position);\r\n\t\t\t\t\tthis.centerMap(position);\r\n\t\t\t\t\tthis.centerStreet(position);\r\n\t\t\t\t\tthis.displayMap();\r\n\t\t\t\t})\r\n\t\t} else {\r\n\t\t\tthis._createMapOn(defaultPosition);\r\n\t\t\tthis.displayMap();\r\n\t\t\tif (this.props.guessInitialLocation) {\r\n\t\t\t\tthis.getUserLocation();\r\n\t\t\t} else {\r\n\t\t\t\tthis.centerMap(defaultPosition);\r\n\t\t\t\tthis.centerStreet(defaultPosition);\r\n\t\t\t\tthis.context.locationToAddress(defaultPosition)\r\n\t\t\t\t\t.then(address => {\r\n\t\t\t\t\t\tthis.currentAddress = address;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\r\n\t\tif (!this.props.address\r\n\t\t\t|| prevProps.address === this.props.address\r\n\t\t\t|| this.currentAddress === this.props.address)\r\n\t\t\treturn;\r\n\t\tthis.context.addressToLocation(this.props.address)\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.log(`Error while location for address ${this.props.address}:`, error);\r\n\t\t\t\treturn this.defaultPosition;\r\n\t\t\t})\r\n\t\t\t.then(position => {\r\n\t\t\t\tthis.currentAddress = this.props.address;\r\n\t\t\t\tif (this.streetIsVisible())\r\n\t\t\t\t\tthis.centerStreet(position);\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.centerMap(position);\r\n\t\t\t})\r\n\t}\r\n\r\n\tgetUserLocation() {\r\n\t\tif (this.cancelablePromise)\r\n\t\t\treturn;\r\n\t\tthis.cancelablePromise = new CancelablePromise(geotag());\r\n\t\tthis.cancelablePromise\r\n\t\t\t.promise\r\n\t\t\t.then((coords) => {\r\n\t\t\t\tif (!this.streetIsVisible()) {\r\n\t\t\t\t\tconsole.log(`Geolocation returned ${coords.latitude} ${coords.longitude}`);\r\n\t\t\t\t\tconst position = new this.context.google.maps.LatLng(coords.latitude, coords.longitude);\r\n\t\t\t\t\tthis.geolocation = position;\r\n\t\t\t\t\tthis.centerMap(position);\r\n\t\t\t\t\tthis.context.locationToAddress(position)\r\n\t\t\t\t\t\t.then(address => {\r\n\t\t\t\t\t\t\tthis.currentAddress = address;\r\n\t\t\t\t\t\t\tthis.userAddress = address;\r\n\t\t\t\t\t\t\tthis.props.onSelect(address);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif ('isCanceled' in error) {\r\n\t\t\t\t\tconsole.error('Geolocation was canceled.');\r\n\t\t\t\t} else if (\"geolocationError\" in error) {\r\n\t\t\t\t\tconsole.error(`Geolocation error. ${error.geolocationError}`);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.error(`Error when getting user location.`);\r\n\t\t\t\t\tconsole.exception(error);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.cancelablePromise = null;\r\n\t\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.cancelablePromise)\r\n\t\t\tthis.cancelablePromise.cancel();\r\n\t}\r\n}\r\n\r\nGoogleView.contextType = AppContext;\r\nGoogleView.propTypes = {\r\n\taddress: PropTypes.string.isRequired,\r\n\tonSelect: PropTypes.func.isRequired,\r\n\tguessInitialLocation: PropTypes.bool,\r\n\tdisplayUserRegions: PropTypes.bool\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\n\r\nexport function addGoogleMapLocationControl(google, map, onClick) {\r\n\tconst geolocationControl = document.createElement('div');\r\n\tgeolocationControl.title = 'Center near my current location';\r\n\tgeolocationControl.classList.add('google-map-geolocation-button');\r\n\tgeolocationControl.index = 1;\r\n\tgeolocationControl.addEventListener('click', onClick);\r\n\t// Mylocation icon reference: (2019/09/04) https://www.materialui.co/icon/my-location\r\n\tReactDOM.render((\r\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n\t\t\t<path d=\"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z\"/>\r\n\t\t</svg>\r\n\t), geolocationControl);\r\n\tmap.controls[google.maps.ControlPosition.RIGHT_CENTER].push(geolocationControl);\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {Search} from \"./search\";\r\nimport {promiseGanify} from \"../api/ganify\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {GoogleView} from \"./GoogleView\";\r\nimport {RingLoader} from \"react-spinners\";\r\n\r\n\r\nexport class AddressManager extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst initialAddress = props.initialAddress || '';\r\n\t\tthis.state = {\r\n\t\t\t// search\r\n\t\t\taddress: initialAddress,\r\n\t\t\tplaces: [],\r\n\t\t\tcurrentFocus: -1,\r\n\t\t\tautocomplete: true,\r\n\t\t\tautocompleteHasFocus: false,\r\n\t\t\terror: '',\r\n\t\t\twait: false,\r\n\t\t\t// address manager\r\n\t\t\tselectedAddress: initialAddress,\r\n\t\t};\r\n\t\tthis.onSearchChange = this.onSearchChange.bind(this);\r\n\t\tthis.onSelectSearchAddress = this.onSelectSearchAddress.bind(this);\r\n\t\tthis.onSearchSubmit = this.onSearchSubmit.bind(this);\r\n\t\tthis.onSelectMapAddress = this.onSelectMapAddress.bind(this);\r\n\t\tthis.onSubmitted = this.onSubmitted.bind(this);\r\n\t}\r\n\r\n\tsetState(state) {\r\n\t\treturn new Promise(resolve => super.setState(state, resolve));\r\n\t}\r\n\r\n\tonSelectMapAddress(address) {\r\n\t\tconsole.log(`Selected from map: ${address}`);\r\n\t\treturn this.setState({selectedAddress: address, address: address, error: ''});\r\n\t}\r\n\r\n\tonSelectSearchAddress(address) {\r\n\t\tconsole.log(`Selected from search; ${address}`);\r\n\t\treturn this.setState({selectedAddress: address, error: ''});\r\n\t}\r\n\r\n\tonSearchChange(newState) {\r\n\t\treturn this.setState(newState);\r\n\t}\r\n\r\n\tonSubmitted(address, result) {\r\n\t\tif (this.props.onSubmitted)\r\n\t\t\treturn this.props.onSubmitted(address, result);\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonSearchSubmit(address) {\r\n\t\treturn this.onSelectSearchAddress(address)\r\n\t\t\t.then(() => this.setState({wait: true}))\r\n\t\t\t.then(() => promiseGanify(address))\r\n\t\t\t.then(result => this.setState({wait: false}).then(() => this.onSubmitted(address, result)))\r\n\t\t\t.catch(error => this.setState({wait: false, error: `Image processing error: ${error}`}).then(() => this.onSubmitted(address, null)));\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Search search={this.state}\r\n\t\t\t\t\t\tonChange={this.onSearchChange}\r\n\t\t\t\t\t\tonSelect={this.onSelectSearchAddress}\r\n\t\t\t\t\t\tonSubmit={this.onSearchSubmit}/>\r\n\t\t\t\t{this.state.error ? <div className=\"error-message pt-4 px-2\">{this.state.error}</div> : ''}\r\n\t\t\t\t<div className={`text-center search-waiting-${this.state.wait ? 'yes' : 'no'}`}>\r\n\t\t\t\t\t<div><RingLoader css={{margin: \"auto\"}}/></div>\r\n\t\t\t\t\t<div className=\"mt-3\">\r\n\t\t\t\t\t\t<strong>We are computing predictions. This may take some seconds ...</strong>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{this.props.showMap ?\r\n\t\t\t\t\t<GoogleView address={this.state.selectedAddress}\r\n\t\t\t\t\t\t\t\tonSelect={this.onSelectMapAddress}\r\n\t\t\t\t\t\t\t\tguessInitialLocation={this.props.guessInitialLocation}\r\n\t\t\t\t\t\t\t\tdisplayUserRegions={this.props.displayUserRegions}/>\r\n\t\t\t\t\t: ''}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAddressManager.propTypes = {\r\n\tonSubmitted: PropTypes.func,\r\n\tinitialAddress: PropTypes.string,\r\n\tshowMap: PropTypes.bool,\r\n\tguessInitialLocation: PropTypes.bool,\r\n\tdisplayUserRegions: PropTypes.bool\r\n};\r\nAddressManager.contextType = AppContext;\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {LoremIpsum} from \"../components/LoremIpsum\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\n\r\nexport class Act extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'act'} title={'What you can do'}>\r\n\t\t\t\t<LoremIpsum/>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAct.contextType = AppContext;\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport PropTypes from 'prop-types';\r\nimport {Act} from \"./act\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\nimport {AddressManager} from \"../components/AddressManager\";\r\nimport ReactCompareImage from 'react-compare-image';\r\n\r\nexport class GanifyResult extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst address = props.initialAddress || '';\r\n\t\tconst result = props.initialResult || {};\r\n\t\tthis.state = {\r\n\t\t\taddress: address,\r\n\t\t\timage: result.original ? `data:image/jpeg;base64,${result.original}` : null,\r\n\t\t\tflooded: (result.flooded || result.original) ? `data:image/jpeg;base64,${result.flooded || result.original}` : null,\r\n\t\t\tmetadata: result.metadata,\r\n\t\t\twarning: result.warning,\r\n\t\t\terror: result.error\r\n\t\t};\r\n\t\tthis.onSubmitted = this.onSubmitted.bind(this);\r\n\t}\r\n\tsetState(state) {\r\n\t\treturn new Promise(resolve => super.setState(state, resolve));\r\n\t}\r\n\tonSubmitted(address, result) {\r\n\t\tif (!result)\r\n\t\t\treturn false;\r\n\t\tconst header = 'data:application/json;base64,';\r\n\t\tresult = JSON.parse(atob(result.substr(header.length)));\r\n\t\treturn this.setState({\r\n\t\t\taddress: address,\r\n\t\t\timage: result.original ? `data:image/jpeg;base64,${result.original}` : null,\r\n\t\t\tflooded: (result.flooded || result.original) ? `data:image/jpeg;base64,${result.flooded || result.original}` : null,\r\n\t\t\tmetadata: result.metadata,\r\n\t\t\twarning: result.warning,\r\n\t\t\terror: result.error\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\tconst address = this.state.address;\r\n\t\tconst pageLoader = this.context.pageLoader;\r\n\t\tconst metadata = this.state.metadata ? Object.values(this.state.metadata) : null;\r\n\t\tif (metadata)\r\n\t\t\tmetadata.sort((m1, m2) => m1.title.localeCompare(m2.title));\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'ganify'} title={address ? `${address}` : `Scenario`}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-md-6\">\r\n\t\t\t\t\t\t<AddressManager guessLocation={false}\r\n\t\t\t\t\t\t\t\t\t\tshowMap={true}\r\n\t\t\t\t\t\t\t\t\t\tinitialAddress={this.state.address}\r\n\t\t\t\t\t\t\t\t\t\tonSubmitted={this.onSubmitted}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-md-6 text-center\">\r\n\t\t\t\t\t\t{this.state.image ? (\r\n\t\t\t\t\t\t\t<ReactCompareImage key={`${address}${Math.random()}`}\r\n\t\t\t\t\t\t\t\t\t\t\t   leftImage={this.state.image}\r\n\t\t\t\t\t\t\t\t\t\t\t   rightImage={this.state.flooded}\r\n\t\t\t\t\t\t\t\t\t\t\t   leftImageAlt={'Original image'}\r\n\t\t\t\t\t\t\t\t\t\t\t   rightImageAlt={'Modified image'}/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className=\"no-image\">Nothing to show</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{this.state.warning ? <div className=\"warning-message pt-4 px-2\">{this.state.warning}</div> : ''}\r\n\t\t\t\t\t\t{this.state.error ? <div className=\"error-message pt-4 px-2\">{this.state.error}</div> : ''}\r\n\t\t\t\t\t\t{metadata ? (\r\n\t\t\t\t\t\t\t<div className=\"my-4 metadata\">{metadata.map((entry, i) => (\r\n\t\t\t\t\t\t\t\t<div className=\"row\" key={i}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-md-8 metadata-title\">{entry.title}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-md-4 metadata-value\">{entry.value || 'N/A'}</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}</div>\r\n\t\t\t\t\t\t) : ''}\r\n\t\t\t\t\t\t<div className=\"my-4\">\r\n\t\t\t\t\t\t\t<button className=\"btn btn-secondary btn-lg px-5\" onClick={() => pageLoader('act', <Act/>)}>\r\n\t\t\t\t\t\t\t\t<strong>Make it change : have an impact</strong>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nGanifyResult.propTypes = {\r\n\tinitialAddress: PropTypes.string.isRequired,\r\n\tinitialResult: PropTypes.object\r\n};\r\nGanifyResult.contextType = AppContext;\r\n","import React from \"react\";\r\nimport {How} from \"./how\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {Helmet} from 'react-helmet-async';\r\nimport {Content} from \"../components/content\";\r\nimport {AddressManager} from \"../components/AddressManager\";\r\nimport {GanifyResult} from \"./ganifyResult\";\r\n\r\nexport class Home extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onSubmitted = this.onSubmitted.bind(this);\r\n\t}\r\n\r\n\tsetState(state) {\r\n\t\treturn new Promise(resolve => super.setState(state, resolve));\r\n\t}\r\n\r\n\tonSubmitted(address, result) {\r\n\t\tconst pageLoader = this.context.pageLoader;\r\n\t\tif (result) {\r\n\t\t\tconst header = 'data:application/json;base64,';\r\n\t\t\tresult = JSON.parse(atob(result.substr(header.length)));\r\n\t\t\tpageLoader('ganify', <GanifyResult initialAddress={address} initialResult={result}/>);\r\n\t\t} else {\r\n\t\t\tpageLoader('ganify', <GanifyResult initialAddress={address} initialResult={null}/>);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst pageLoader = this.context.pageLoader;\r\n\t\treturn (\r\n\t\t\t<Content className=\"home\">\r\n\t\t\t\t<Helmet>\r\n\t\t\t\t\t<title>Welcome! | CC-AI</title>\r\n\t\t\t\t</Helmet>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-md-7 pr-md-5\">\r\n\t\t\t\t\t\t<div className=\"top-text text-center text-md-left\">\r\n\t\t\t\t\t\t\tVisualizing the consequences of Climate Change\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"my-5\">\r\n\t\t\t\t\t\t\t<AddressManager guessLocation={true}\r\n\t\t\t\t\t\t\t\t\t\t\tonSubmitted={this.onSubmitted}\r\n\t\t\t\t\t\t\t\t\t\t\tshowMap={true}\r\n\t\t\t\t\t\t\t\t\t\t\tguessInitialLocation={true}\r\n\t\t\t\t\t\t\t\t\t\t\tdisplayUserRegions={true}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<button className=\"learn-more btn btn-secondary p-3 mb-4\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => pageLoader('how', <How/>)}>\r\n\t\t\t\t\t\t\t\tLearn more about the science\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"right-text col-md-5 align-self-center text-justify\">\r\n\t\t\t\t\t\tThis website shows you how climate change could affect our daily lives. Choose a scenario\r\n\t\t\t\t\t\tand a location, a climate model will run and tell you what's likely to happen and an AI\r\n\t\t\t\t\t\twill generate what it could look like\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Content>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nHome.contextType = AppContext;\r\n","import React from \"react\";\r\nimport PropTypes from 'prop-types';\r\n\r\nexport class ExternalLink extends React.Component {\r\n\trender() {\r\n\t\treturn (<a target=\"_blank\" rel=\"noopener noreferrer\" href={this.props.href}>{this.props.children}</a>);\r\n\t}\r\n}\r\n\r\nExternalLink.propTypes = {\r\n\thref: PropTypes.string.isRequired\r\n};\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\nimport {ExternalLink} from \"../components/ExternalLink\";\r\n\r\nexport class About extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'about'} title={'About'}>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tThe CCAI project is an interdisciplinary project aimed at creating images of accurate,\r\n\t\t\t\t\tvivid, and personalized outcomes of climate change. Our goal is to use cutting-edge\r\n\t\t\t\t\tmachine learning techniques to produce images of how neighborhoods and houses will look\r\n\t\t\t\t\tlike following the effects of global warming. By creating a more visceral understanding\r\n\t\t\t\t\tof the effects of climate change, we aim to strengthen public support for necessary\r\n\t\t\t\t\tactions and motivate people to make impactful decisions. As a prototype, we first focus\r\n\t\t\t\t\ton modeling flood consequences on homes.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tOur project aims to raise awareness and conceptual understanding\r\n\t\t\t\t\tof climate change by bringing the future closer. More info&nbsp;\r\n\t\t\t\t\t<ExternalLink href={'https://mila.quebec/en/ai-society/visualizing-climate-change/'}>\r\n\t\t\t\t\t\there</ExternalLink>.\r\n\t\t\t\t</p>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAbout.contextType = AppContext;\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\nimport {ExternalLink} from \"../components/ExternalLink\";\r\n\r\nexport class Contact extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'contact'} title={'Contact'}>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tThis project is lead by\r\n\t\t\t\t\tSasha Luccioni (<ExternalLink href={'https://github.com/sashavor'}>@sashavor</ExternalLink>),\r\n\t\t\t\t\tKarthik Mukkavilli (<ExternalLink href={'https://github.com/mukkavilli'}>@mukkavilli</ExternalLink>),\r\n\t\t\t\t\tVahe Vardanyan (<ExternalLink href={'https://github.com/vahe987'}>@vahe987</ExternalLink>)\r\n\t\t\t\t\tand Victor Schmidt (<ExternalLink href={'https://github.com/vict0rsch'}>@vict0rsch</ExternalLink>)\r\n\t\t\t\t\tfrom Mila (<ExternalLink href={'https://github.com/mila-iqia'}>@Mila-iqai</ExternalLink>),\r\n\t\t\t\t\toverseen by <ExternalLink href={'https://mila.quebec/en/yoshua-bengio/'}>Yoshua\r\n\t\t\t\t\tBengio</ExternalLink>&nbsp;\r\n\t\t\t\t\tand <ExternalLink href={'https://www.microsoft.com/en-us/research/people/jchayes/'}>Jennifer\r\n\t\t\t\t\tChayes</ExternalLink>.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tYou can contact us via\r\n\t\t\t\t\temail: <code>{'{luccionis | mukkavis | schmidtv | vardanyv}'}@mila.quebec</code>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tWe have a Slack workspace, get in touch with us so we add you to it!\r\n\t\t\t\t</p>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nContact.contextType = AppContext;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\n\r\nexport class MenuLink extends React.Component {\r\n\trender() {\r\n\t\tconst classNames = [];\r\n\t\tif (this.props.nav || this.props.nav === undefined)\r\n\t\t\tclassNames.push('nav-link');\r\n\t\tif (this.props.center || this.props.center === undefined)\r\n\t\t\tclassNames.push('text-center');\r\n\t\tif (this.props.pageName === this.props.currentPage)\r\n\t\t\treturn classNames.length ? <span className={classNames.join(' ')}>{this.props.children}</span> : this.props.children;\r\n\t\tclassNames.push('link');\r\n\t\treturn (\r\n\t\t\t<span className={classNames.join(' ')}\r\n\t\t\t\t  onClick={() => this.context.pageLoader(this.props.pageName, this.props.pageContent)}>\r\n                {this.props.children}\r\n            </span>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMenuLink.propTypes = {\r\n\tpageName: PropTypes.string.isRequired,\r\n\tpageContent: PropTypes.object.isRequired,\r\n\tcurrentPage: PropTypes.string.isRequired,\r\n\tnav: PropTypes.bool,\r\n\tcenter: PropTypes.bool\r\n};\r\nMenuLink.contextType = AppContext;\r\n","import React from 'react';\r\nimport {Logo} from \"./components/logo\";\r\nimport {Home} from \"./pages/home\";\r\nimport {About} from \"./pages/about\";\r\nimport {How} from \"./pages/how\";\r\nimport {Act} from \"./pages/act\";\r\nimport {Contact} from \"./pages/contact\";\r\nimport {AppContext, AppContextInstance} from \"./contexts/AppContext\";\r\nimport {MenuLink} from \"./components/MenuLink\";\r\nimport Script from 'react-load-script';\r\n\r\nexport class App extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tname: 'home',\r\n\t\t\tbody: <Home/>,\r\n\t\t\tcontext: new AppContextInstance(null, null)\r\n\t\t};\r\n\t\tthis.pageLoader = this.pageLoader.bind(this);\r\n\t\tthis.loadGoogleContext = this.loadGoogleContext.bind(this);\r\n\t}\r\n\r\n\tpageLoader(name, body) {\r\n\t\tthis.setState({name: name, body: body});\r\n\t}\r\n\r\n\tloadGoogleContext() {\r\n\t\tthis.setState({context: new AppContextInstance(this.pageLoader, window.google)});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<AppContext.Provider value={this.state.context}>\r\n\t\t\t\t{this.state.context.google ? (\r\n\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t<div className=\"header row align-items-center\">\r\n\t\t\t\t\t\t\t<div className=\"logo col-md text-md-left\">\r\n\t\t\t\t\t\t\t\t<MenuLink nav={false} center={false}\r\n\t\t\t\t\t\t\t\t\t\t  pageName={'home'} pageContent={<Home/>} currentPage={this.state.name}>\r\n\t\t\t\t\t\t\t\t\t<Logo/>\r\n\t\t\t\t\t\t\t\t</MenuLink>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"menu col-md\">\r\n\t\t\t\t\t\t\t\t<nav className=\"nav justify-content-end flex-column flex-md-row mt-3\">\r\n\t\t\t\t\t\t\t\t\t<MenuLink pageName={'home'} pageContent={<Home/>} currentPage={this.state.name}>\r\n\t\t\t\t\t\t\t\t\t\tHome\r\n\t\t\t\t\t\t\t\t\t</MenuLink>\r\n\t\t\t\t\t\t\t\t\t<MenuLink pageName={'about'} pageContent={<About/>} currentPage={this.state.name}>\r\n\t\t\t\t\t\t\t\t\t\tAbout\r\n\t\t\t\t\t\t\t\t\t</MenuLink>\r\n\t\t\t\t\t\t\t\t\t<MenuLink pageName={'how'} pageContent={<How/>} currentPage={this.state.name}>How it\r\n\t\t\t\t\t\t\t\t\t\tworks\r\n\t\t\t\t\t\t\t\t\t</MenuLink>\r\n\t\t\t\t\t\t\t\t\t<MenuLink pageName={'act'} pageContent={<Act/>} currentPage={this.state.name}>\r\n\t\t\t\t\t\t\t\t\t\tWhat you can do\r\n\t\t\t\t\t\t\t\t\t</MenuLink>\r\n\t\t\t\t\t\t\t\t\t<MenuLink pageName={'contact'} pageContent={<Contact/>} currentPage={this.state.name}>\r\n\t\t\t\t\t\t\t\t\t\tContact\r\n\t\t\t\t\t\t\t\t\t</MenuLink>\r\n\t\t\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{this.state.body}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : ''}\r\n\t\t\t\t<Script async defer\r\n\t\t\t\t\t\turl={`https://maps.googleapis.com/maps/api/js?key=${process.env.REACT_APP_GOOGLE_API_KEY}&libraries=places`}\r\n\t\t\t\t\t\tonLoad={this.loadGoogleContext}/>\r\n\t\t\t</AppContext.Provider>\r\n\t\t);\r\n\t}\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './index.css';\r\nimport {App} from './App';\r\nimport {HelmetProvider} from \"react-helmet-async\";\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<HelmetProvider><App/></HelmetProvider>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}