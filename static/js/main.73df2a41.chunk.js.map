{"version":3,"sources":["components/logo.js","contexts/AppContext.js","components/content.js","components/StaticPage.js","components/ExternalLink.js","pages/whatYouCanDo.js","components/AutoCompletionItem.js","components/search.js","api/callAutocomplete.js","api/ganify.js","api/cancelablePromise.js","api/geotag.js","components/flood_no_water_10.js","components/GoogleView.js","api/googleMapLocationControl.js","components/AddressManager.js","pages/floodModels.js","pages/glossary.js","api/utils.js","components/internalLink.js","pages/howClimateChangeCausesFlooding.js","pages/ganifyResult.js","pages/contact.js","pages/relatedEfforts.js","pages/aboutMachineLearning.js","pages/howItWorks.js","pages/about.js","pages/home.js","App.js","serviceWorker.js","index.js"],"names":["Logo","alt","src","process","voidFunction","AppContextInstance","registerPage","google","this","geocoder","maps","Geocoder","autocomplete","places","AutocompleteService","locationToAddress","bind","addressToLocation","position","Promise","resolve","reject","geocode","latLng","results","status","GeocoderStatus","OK","formatted_address","address","geometry","location","AppContext","React","createContext","Content","className","props","children","Component","StaticPage","name","title","ExternalLink","target","rel","href","WhatYouCanDo","contextType","pageName","AutoCompletionItem","active","onClick","value","Search","state","submitting","windowGotFocus","onInputFocus","onInputBlur","onAddressChanged","onKeyDown","onSubmitAddress","choosePlace","hasPlaces","onCompletionFocus","onCompletionBlur","turnSubmittingFlag","setWindowFocus","unsetWindowFocus","setState","event","onChange","search","autocompleteHasFocus","update","error","currentFocus","then","googleContext","onresult","onerror","addressForUrl","getQueryPredictions","input","predictions","PlacesServiceStatus","descriptions","forEach","prediction","push","description","Error","callAutocomplete","context","console","log","nbPlaces","length","preventDefault","addressChanged","keyCode","onSelect","elemId","caretPos","element","document","getElementById","createTextRange","range","move","select","undefined","selectionStart","setSelectionRange","focus","setCaretPosition","onSubmit","stopDisplaying","id","autoComplete","htmlFor","icon","SearchIcon","type","placeholder","onFocus","onBlur","onMouseEnter","onMouseLeave","map","place","i","key","disabled","window","addEventListener","removeEventListener","promiseGanify","encodeURI","apiCall","Math","random","axios","method","url","responseType","reponse","reader","FileReader","readAsDataURL","data","onloadend","result","catch","ganify","CancelablePromise","promise","isCanceled","val","cancel","geolocationError","message","FLOOD","GoogleView","currentAddress","currentMarker","streetPositionIsManual","defaultPosition","currentCircle","allFlood","geolocation","userAddress","displayStreet","displayMap","markMapOn","centerMap","centerStreet","getUserLocation","onMapClick","getStreetView","getVisible","setVisible","query","nearLocation","request","fields","locationBias","Circle","center","radius","findPlaceFromQuery","pos1","pos2","setMap","Marker","displayUserRegions","lat","lng","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","addListener","bounds","rectangleBounds","north","south","west","east","rectangle","Rectangle","ev","panTo","setPosition","Map","zoom","streetViewControl","PlacesService","getLocation","searchAddress","streetControl","createElement","classList","add","textContent","index","getPosition","controls","ControlPosition","TOP_LEFT","geolocationControl","ReactDOM","render","xmlns","width","height","viewBox","d","RIGHT_CENTER","addGoogleMapLocationControl","streetIsVisible","LatLng","_createMapOn","guessInitialLocation","drawFlood","prevProps","prevState","snapshot","cancelablePromise","navigator","getCurrentPosition","coords","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","UNKNOWN_ERROR","latitude","longitude","exception","finally","AddressManager","initialAddress","wait","selectedAddress","onSearchChange","onSelectSearchAddress","onSearchSubmit","onSelectMapAddress","onSubmitted","newState","css","margin","showMap","FloodModels","Glossary","getPageName","component","getPageLink","pageLink","link","replace","charAt","toLocaleLowerCase","InternalLink","register","page","currentPageName","removeDefaultClass","to","HowClimateChangeCausesFlooding","GanifyResult","getInitialAddress","getInitialResult","image","original","flooded","metadata","warning","JSON","parse","atob","substr","Object","values","sort","m1","m2","localeCompare","leftImage","rightImage","leftImageAlt","rightImageAlt","entry","defaultValue","initialResult","Contact","RelatedEfforts","AboutMachineLearning","HowItWorks","About","HomeComponent","history","Home","withRouter","App","loadGoogleContext","content","exact","path","Provider","data-toggle","data-target","aria-controls","aria-expanded","aria-label","navMenu","role","aria-haspopup","aria-labelledby","menu","route","async","defer","onLoad","Boolean","hostname","match","serviceWorker","ready","registration","unregister"],"mappings":"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Ac,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,aAAa,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,cAAc,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,aAAa,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,aAAa,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,cAAc,CAAC,cAAc,eAAe,eAAe,cAAc,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,cAAc,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,YAAY,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,aAAa,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,aAAa,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,cAAc,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,aAAa,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,YAAY,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,aAAa,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,cAAc,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,aAAa,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,aAAa,eAAe,aAAa,eAAe,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,YAAY,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,aAAa,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,YAAY,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,cAAc,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,YAAY,CAAC,cAAc,eAAe,eAAe,cAAc,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,aAAa,eAAe,eAAe,cAAc,CAAC,aAAa,eAAe,eAAe,aAAa,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,YAAY,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,cAAc,cAAc,eAAe,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,aAAa,eAAe,eAAe,CAAC,cAAc,aAAa,eAAe,cAAc,CAAC,cAAc,aAAa,eAAe,cAAc,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,cAAc,CAAC,cAAc,eAAe,eAAe,cAAc,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,cAAc,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,aAAa,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,cAAc,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,aAAa,eAAe,eAAe,cAAc,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,cAAc,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,aAAa,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,cAAc,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,aAAa,eAAe,eAAe,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,cAAc,eAAe,eAAe,cAAc,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,cAAc,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,aAAa,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,aAAa,eAAe,eAAe,cAAc,CAAC,cAAc,eAAe,eAAe,cAAc,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,aAAa,eAAe,cAAc,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,aAAa,eAAe,cAAc,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,cAAc,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cAAc,eAAe,eAAe,eAAe,CAAC,cA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","file":"static/js/main.73df2a41.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport function Logo() {\r\n\treturn (\r\n\t\t<img alt=\"cc-ai logo\" src={process.env.PUBLIC_URL + '/logo.svg'}/>\r\n\t);\r\n}\r\n","import React from 'react';\r\n\r\nfunction voidFunction() {}\r\n\r\nexport class AppContextInstance {\r\n\tconstructor(registerPage, google) {\r\n\t\tthis.registerPage = registerPage || voidFunction;\r\n\t\tthis.google = google || null;\r\n\t\tthis.geocoder = google ? new google.maps.Geocoder() : null;\r\n\t\tthis.autocomplete = google ? new google.maps.places.AutocompleteService() : null;\r\n\t\tthis.locationToAddress = this.locationToAddress.bind(this);\r\n\t\tthis.addressToLocation = this.addressToLocation.bind(this);\r\n\t}\r\n\r\n\tlocationToAddress(position) {\r\n\t\t// resolve(address)\r\n\t\t// reject(status)\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.geocoder.geocode({latLng: position}, (results, status) => {\r\n\t\t\t\tif (status === this.google.maps.GeocoderStatus.OK)\r\n\t\t\t\t\tresolve(results[0].formatted_address);\r\n\t\t\t\telse\r\n\t\t\t\t\treject(status);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\taddressToLocation(address) {\r\n\t\t// resolve(latLngObject)\r\n\t\t// reject(status)\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.geocoder.geocode({address: address}, (results, status) => {\r\n\t\t\t\tif (status === this.google.maps.GeocoderStatus.OK)\r\n\t\t\t\t\tresolve(results[0].geometry.location);\r\n\t\t\t\telse\r\n\t\t\t\t\treject(status);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport const AppContext = React.createContext(new AppContextInstance(null, null));\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport class Content extends React.Component {\r\n\trender() {\r\n\t\treturn <div className={`${this.props.className} mt-5 pt-5 mb-5`}>{this.props.children}</div>;\r\n\t}\r\n}\r\n\r\nContent.propTypes = {\r\n\tclassName: PropTypes.string\r\n};\r\n","import React from 'react';\r\nimport {Helmet} from 'react-helmet-async';\r\nimport PropTypes from 'prop-types';\r\nimport {Content} from \"./content\";\r\n\r\nexport class StaticPage extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Content className={`${this.props.name} static-page`}>\r\n\t\t\t\t<Helmet>\r\n\t\t\t\t\t<title>{this.props.title} | CC-AI</title>\r\n\t\t\t\t</Helmet>\r\n\t\t\t\t<h1>{this.props.title}</h1>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</Content>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nStaticPage.propTypes = {\r\n\ttitle: PropTypes.string.isRequired,\r\n\tname: PropTypes.string.isRequired\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from 'prop-types';\r\n\r\nexport class ExternalLink extends React.Component {\r\n\trender() {\r\n\t\treturn (<a className=\"external-link\"\r\n\t\t\t\t   target=\"_blank\" rel=\"noopener noreferrer\"\r\n\t\t\t\t   href={this.props.href}>{this.props.children}</a>);\r\n\t}\r\n}\r\n\r\nExternalLink.propTypes = {\r\n\thref: PropTypes.string.isRequired\r\n};\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\nimport {ExternalLink} from \"../components/ExternalLink\";\r\n\r\nexport class WhatYouCanDo extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'act'} title={'What you can do'}>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tDaily decisions made by individuals are part of our global effort to fight climate change.\r\n\t\t\t\t\tThere are many decisions that are within our research, such as:\r\n\t\t\t\t</p>\r\n\t\t\t\t<ol>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<strong>Driving and flying less</strong>: going car-free and reducing the amount of flights\r\n\t\t\t\t\t\tthat you take can reduce your carbon emissions by <ExternalLink\r\n\t\t\t\t\t\thref={'https://data.oecd.org/air/air-and-ghg-emissions.htm'}>\r\n\t\t\t\t\t\ta quarter in developing countries</ExternalLink>.\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<strong>Changing what you eat</strong>: by reducing your consumption of animal protein by half,\r\n\t\t\t\t\t\tyou can cut your diet's carbon footprint <ExternalLink\r\n\t\t\t\t\t\thref={'https://www.wri.org/blog/2016/04/sustainable-diets-what-you-need-know-12-charts'}>\r\n\t\t\t\t\t\tby more than 40%</ExternalLink>.\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<strong>Shop differently</strong>: by buying <ExternalLink\r\n\t\t\t\t\t\thref={'https://www.carbontrust.com/media/38358/ctc793-international-carbon-flows-clothing.pdf'}>\r\n\t\t\t\t\t\tless</ExternalLink> and buying <ExternalLink href={'http://shrinkthatfootprint.com/food-miles'}>\r\n\t\t\t\t\t\tlocal</ExternalLink>, you can reduce the carbon footprint of your shopping habits.\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<strong>Offsetting</strong>: consider signing up for a <ExternalLink\r\n\t\t\t\t\t\thref={'https://projectwren.com/'}>\r\n\t\t\t\t\t\tmonthly subscription</ExternalLink> or a <ExternalLink href={'https://www.goldstandard.org/'}>\r\n\t\t\t\t\t\tone-off payment</ExternalLink> to offset the emissions that you canâ€™t cut down.\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ol>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tHow much power does a single individual have? A lot! Research has found that:\r\n\t\t\t\t</p>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\tPeople will fly less when they know someone who has given up flying because of climate change [\r\n\t\t\t\t\t\t<ExternalLink\r\n\t\t\t\t\t\t\thref={'https://drive.google.com/file/d/1GHMzLpkPVJ-a2fifjswLxxqAqTEllVNs/view'}>source</ExternalLink>]\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\tCustomers at a cafe who were told that 30% of Americans have reduced their meat consumption\r\n\t\t\t\t\t\twere twice as likely to order a vegetarian meal [<ExternalLink\r\n\t\t\t\t\t\thref={'https://journals.sagepub.com/doi/abs/10.1177/0956797617719950'}>\r\n\t\t\t\t\t\tsource</ExternalLink>]\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\tSolar panels are contagious - households in California were more likely to install solar panels\r\n\t\t\t\t\t\tif their neighbors already took that step [<ExternalLink\r\n\t\t\t\t\t\thref={'https://www.nature.com/articles/s41586-018-0647-4'}>\r\n\t\t\t\t\t\tsource</ExternalLink>]\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tFinally, remember that just <ExternalLink\r\n\t\t\t\t\thref={\"https://b8f65cb373b1b7b15feb-c70d8ead6ced550b4d987d7c03fcdd1d.ssl.cf3.rackcdn.com/cms/reports/documents/000/002/327/original/Carbon-Majors-Report-2017.pdf?1499691240\"}>\r\n\t\t\t\t\t100 companies in the world are responsible for over 70 percent of global emissions</ExternalLink>.\r\n\t\t\t\t\tBy consuming more carefully and consciously, choosing companies that act\r\n\t\t\t\t\tresponsibly, and voting for governments that hold companies accountable for their environmental\r\n\t\t\t\t\tpractices, our actions will influence the planet for the coming decades and centuries.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>More resources:</p>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li>The Intergovernmental Panel on Climate Change reports - <ExternalLink\r\n\t\t\t\t\t\thref={\"https://www.ipcc.ch/\"}>\r\n\t\t\t\t\t\tIPCC website\r\n\t\t\t\t\t</ExternalLink></li>\r\n\t\t\t\t\t<li><ExternalLink href={\"https://climateatlas.ca/\"}>\r\n\t\t\t\t\t\tClimate Change Atlas of Canada\r\n\t\t\t\t\t</ExternalLink> - presenting the impacts of climate change in Canada\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li><ExternalLink href={\"https://www.drawdown.org/\"}>Project Drawdown</ExternalLink> - a research\r\n\t\t\t\t\t\torganization that reviews, analyses, and identifies the most viable global climate solutions.\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>Individual action on climate change - <ExternalLink\r\n\t\t\t\t\t\thref={\"https://en.wikipedia.org/wiki/Individual_action_on_climate_change\"}>\r\n\t\t\t\t\t\tWikipedia page\r\n\t\t\t\t\t</ExternalLink></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nWhatYouCanDo.contextType = AppContext;\r\nWhatYouCanDo.pageName = 'WhatYouCanDo';\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport class AutoCompletionItem extends React.Component {\r\n\trender() {\r\n\t\t// autocomplete-active\r\n\t\treturn (\r\n\t\t\t<div {...(this.props.active ? {className: 'autocomplete-active'} : {})}\r\n\t\t\t\t {...(this.props.onClick ? {onClick: this.props.onClick} : {})}>\r\n\t\t\t\t{this.props.value}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAutoCompletionItem.propTypes = {\r\n\tvalue: PropTypes.string.isRequired,\r\n\tactive: PropTypes.bool.isRequired,\r\n\tonClick: PropTypes.func\r\n};\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport Octicon, {Search as SearchIcon} from '@primer/octicons-react';\r\nimport {callAutocomplete} from \"../api/callAutocomplete\";\r\nimport {AutoCompletionItem} from \"./AutoCompletionItem\";\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction setCaretPosition(elemId, caretPos) {\r\n\t// Reference (2019/06/13): https://stackoverflow.com/a/512542\r\n\tvar element = document.getElementById(elemId);\r\n\tif (!element)\r\n\t\treturn;\r\n\tif (element.createTextRange) {\r\n\t\tvar range = element.createTextRange();\r\n\t\trange.move('character', caretPos);\r\n\t\trange.select();\r\n\t} else if (element.selectionStart !== undefined) {\r\n\t\telement.setSelectionRange(caretPos, caretPos);\r\n\t} else {\r\n\t\telement.focus();\r\n\t}\r\n}\r\n\r\nexport class Search extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tsubmitting: false,\r\n\t\t\twindowGotFocus: false,\r\n\t\t};\r\n\t\tthis.onInputFocus = this.onInputFocus.bind(this);\r\n\t\tthis.onInputBlur = this.onInputBlur.bind(this);\r\n\t\tthis.onAddressChanged = this.onAddressChanged.bind(this);\r\n\t\tthis.onKeyDown = this.onKeyDown.bind(this);\r\n\t\tthis.onSubmitAddress = this.onSubmitAddress.bind(this);\r\n\t\tthis.choosePlace = this.choosePlace.bind(this);\r\n\t\tthis.hasPlaces = this.hasPlaces.bind(this);\r\n\t\tthis.onCompletionFocus = this.onCompletionFocus.bind(this);\r\n\t\tthis.onCompletionBlur = this.onCompletionBlur.bind(this);\r\n\t\tthis.turnSubmittingFlag = this.turnSubmittingFlag.bind(this);\r\n\t\tthis.setWindowFocus = this.setWindowFocus.bind(this);\r\n\t\tthis.unsetWindowFocus = this.unsetWindowFocus.bind(this);\r\n\t}\r\n\r\n\tsetState(state) {\r\n\t\treturn new Promise(resolve => super.setState(state, resolve));\r\n\t}\r\n\r\n\tturnSubmittingFlag() {\r\n\t\treturn this.setState({submitting: !this.state.submitting});\r\n\t}\r\n\r\n\tonInputFocus(event) {\r\n\t\tif (this.state.windowGotFocus) {\r\n\t\t\tthis.unsetWindowFocus();\r\n\t\t} else {\r\n\t\t\tthis.props.onChange({autocomplete: true});\r\n\t\t}\r\n\t}\r\n\r\n\tonInputBlur() {\r\n\t\tif (!this.props.search.autocompleteHasFocus)\r\n\t\t\tthis.props.onChange({autocomplete: false});\r\n\t}\r\n\r\n\tonCompletionFocus() {\r\n\t\tthis.props.onChange({autocompleteHasFocus: true});\r\n\t}\r\n\r\n\tonCompletionBlur() {\r\n\t\tthis.props.onChange({autocompleteHasFocus: false});\r\n\t}\r\n\r\n\tonAddressChanged(event) {\r\n\t\tconst value = event.target.value;\r\n\t\tconst update = {address: value, error: '', currentFocus: -1, autocomplete: true};\r\n\t\tif (!value)\r\n\t\t\tupdate.places = [];\r\n\t\tthis.props.onChange(update).then(() => {\r\n\t\t\tif (value) {\r\n\t\t\t\tcallAutocomplete(value, this.context, results => {\r\n\t\t\t\t\tthis.props.onChange({places: results});\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\tthis.props.onChange({places: []});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonKeyDown(event) {\r\n\t\tif (!this.hasPlaces())\r\n\t\t\treturn;\r\n\t\tconst nbPlaces = this.props.search.places.length;\r\n\t\tlet preventDefault = false;\r\n\t\tlet addressChanged = false;\r\n\t\tlet address = this.props.search.address;\r\n\t\tlet currentFocus = this.props.search.currentFocus;\r\n\t\tlet autocomplete = this.props.search.autocomplete;\r\n\t\tlet autocompleteHasFocus = this.props.search.autocompleteHasFocus;\r\n\t\tif (event.keyCode === 13) { // enter\r\n\t\t\t/*If the ENTER key is pressed, prevent the form from being submitted,*/\r\n\t\t\tconsole.log('ENTER');\r\n\t\t\tif (autocomplete && currentFocus !== -1) {\r\n\t\t\t\taddress = this.props.search.places[currentFocus];\r\n\t\t\t\taddressChanged = preventDefault = true;\r\n\t\t\t}\r\n\t\t\tautocomplete = autocompleteHasFocus = false;\r\n\t\t} else if (event.keyCode === 27) { // escape\r\n\t\t\tconsole.log('ESCAPE');\r\n\t\t\tautocomplete = autocompleteHasFocus = false;\r\n\t\t} else if (event.keyCode === 40) { // down\r\n\t\t\tconsole.log('DOWN');\r\n\t\t\t/*If the arrow DOWN key is pressed, increase the currentFocus variable:*/\r\n\t\t\t++currentFocus;\r\n\t\t\tif (currentFocus >= nbPlaces)\r\n\t\t\t\tcurrentFocus = 0;\r\n\t\t\tautocomplete = preventDefault = true;\r\n\t\t} else if (event.keyCode === 38) { //up\r\n\t\t\tconsole.log('UP');\r\n\t\t\t/*If the arrow UP key is pressed, decrease the currentFocus variable:*/\r\n\t\t\t--currentFocus;\r\n\t\t\tif (currentFocus < 0)\r\n\t\t\t\tcurrentFocus = nbPlaces - 1;\r\n\t\t\tautocomplete = preventDefault = true;\r\n\t\t}\r\n\t\tif (preventDefault)\r\n\t\t\tevent.preventDefault();\r\n\t\tthis.props.onChange({\r\n\t\t\taddress: address,\r\n\t\t\tcurrentFocus: currentFocus,\r\n\t\t\tautocomplete: autocomplete,\r\n\t\t\tautocompleteHasFocus: autocompleteHasFocus\r\n\t\t}).then(() => {\r\n\t\t\tif (addressChanged && this.props.onSelect)\r\n\t\t\t\tthis.props.onSelect(address);\r\n\t\t});\r\n\t}\r\n\r\n\tonSubmitAddress(event) {\r\n\t\tevent.preventDefault();\r\n\t\tconst address = this.props.search.address;\r\n\t\tsetCaretPosition('inputAddress', 0);\r\n\t\tthis.turnSubmittingFlag()\r\n\t\t\t.then(() => this.props.onSubmit(address))\r\n\t\t\t.then((stopDisplaying) => {\r\n\t\t\t\tif (!stopDisplaying)\r\n\t\t\t\t\tthis.turnSubmittingFlag();\r\n\t\t\t})\r\n\t}\r\n\r\n\tchoosePlace(currentFocus) {\r\n\t\tconst address = this.props.search.places[currentFocus];\r\n\t\tthis.props.onChange({\r\n\t\t\taddress: address,\r\n\t\t\tcurrentFocus: currentFocus,\r\n\t\t\tautocomplete: false,\r\n\t\t\tautocompleteHasFocus: false\r\n\t\t});\r\n\t\tif (this.props.onSelect)\r\n\t\t\tthis.props.onSelect(address);\r\n\t}\r\n\r\n\thasPlaces() {\r\n\t\treturn this.props.search.places.length > 0 && (this.props.search.places.length !== 1 || this.props.search.places[0] !== this.props.search.address);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst address = this.props.search.address;\r\n\t\treturn (\r\n\t\t\t<div className=\"search\">\r\n\t\t\t\t<form id=\"search-form\" onSubmit={this.onSubmitAddress} autoComplete=\"off\">\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col-md-9\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"inputAddress\" className=\"sr-only\">Address</label>\r\n\t\t\t\t\t\t\t<Octicon icon={SearchIcon}/>\r\n\t\t\t\t\t\t\t<div className=\"autocomplete\">\r\n\t\t\t\t\t\t\t\t<input className=\"form-control\"\r\n\t\t\t\t\t\t\t\t\t   id=\"inputAddress\"\r\n\t\t\t\t\t\t\t\t\t   type=\"text\"\r\n\t\t\t\t\t\t\t\t\t   placeholder=\"Search an address\"\r\n\t\t\t\t\t\t\t\t\t   value={address}\r\n\t\t\t\t\t\t\t\t\t   onFocus={this.onInputFocus}\r\n\t\t\t\t\t\t\t\t\t   onBlur={this.onInputBlur}\r\n\t\t\t\t\t\t\t\t\t   onKeyDown={this.onKeyDown}\r\n\t\t\t\t\t\t\t\t\t   onChange={this.onAddressChanged}/>\r\n\t\t\t\t\t\t\t\t{this.props.search.autocomplete && this.hasPlaces() ? (\r\n\t\t\t\t\t\t\t\t\t<div id=\"autocomplete-list\"\r\n\t\t\t\t\t\t\t\t\t\t onMouseEnter={this.onCompletionFocus}\r\n\t\t\t\t\t\t\t\t\t\t onMouseLeave={this.onCompletionBlur}\r\n\t\t\t\t\t\t\t\t\t\t className=\"autocomplete-items\">\r\n\t\t\t\t\t\t\t\t\t\t{this.props.search.places.map((place, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<AutoCompletionItem active={this.props.search.currentFocus === i}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.choosePlace(i)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={place}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}/>))}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t) : ''\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-md-3\">\r\n\t\t\t\t\t\t\t<button className=\"btn btn-secondary btn-lg btn-block py-3\"\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tid=\"submitButton\"\r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.submitting}>\r\n\t\t\t\t\t\t\t\t<strong>Go!</strong>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tsetWindowFocus() {\r\n\t\tthis.setState({windowGotFocus: true});\r\n\t}\r\n\r\n\tunsetWindowFocus() {\r\n\t\tthis.setState({windowGotFocus: false});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\twindow.addEventListener('focus', this.setWindowFocus);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\twindow.removeEventListener('focus', this.setWindowFocus);\r\n\t}\r\n}\r\n\r\nSearch.contextType = AppContext;\r\nSearch.propTypes = {\r\n\tsearch: PropTypes.object.isRequired,\r\n\tonChange: PropTypes.func.isRequired,\r\n\tonSelect: PropTypes.func.isRequired,\r\n\tonSubmit: PropTypes.func.isRequired\r\n};\r\n","export function callAutocomplete(address, googleContext, onresult, onerror) {\r\n\tconst addressForUrl = address;\r\n\t// Add a random string at the end to prevent browser for using the cache.\r\n\tgoogleContext.autocomplete.getQueryPredictions({input: addressForUrl}, (predictions, status) => {\r\n\t\tif (status !== googleContext.google.maps.places.PlacesServiceStatus.OK) {\r\n\t\t\tif (onerror)\r\n\t\t\t\tonerror(new Error(`Unable to get autocompletion for ${addressForUrl}. Status ${status}.`));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst descriptions = [];\r\n\t\tpredictions.forEach(function (prediction) {\r\n\t\t\tdescriptions.push(prediction.description);\r\n\t\t\tif (onresult) {\r\n\t\t\t\tonresult(descriptions);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n","import axios from \"axios\";\r\n\r\nexport function ganify(address, onresult, onerror) {\r\n\t// const addressForUrl = stringToBase64(address);\r\n\tconst addressForUrl = encodeURI(address);\r\n\r\n\t// Remote end point.\r\n\t// const endPoint = 'https://api.climatechangeai.org/address/munit';\r\n\tconst endPoint = 'https://api.climatechangeai.org/flood/munit';\r\n\r\n\t// Local end point.\r\n\t// const endPoint = 'http://localhost:5000/address/01';\r\n\r\n\t// Add a random string at the end to prevent browser for using the cache.\r\n\tconst apiCall = `${endPoint}/${addressForUrl}?${Math.random()}`;\r\n\tconsole.log(`Calling: ${apiCall}`);\r\n\taxios({\r\n\t\tmethod: 'get',\r\n\t\turl: apiCall,\r\n\t\tresponseType: 'blob'\r\n\t})\r\n\t\t.then(reponse => {\r\n\t\t\t// Is this possible?\r\n\t\t\tif (!reponse)\r\n\t\t\t\tthrow new Error(`No images for address ${address}`);\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.readAsDataURL(reponse.data);\r\n\t\t\treader.onloadend = function () {\r\n\t\t\t\tconsole.log(`Images loaded for ${address}`);\r\n\t\t\t\tonresult(reader.result);\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tif (onerror)\r\n\t\t\t\tonerror(error);\r\n\t\t});\r\n}\r\n\r\nexport function promiseGanify(address) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tif (address)\r\n\t\t\tganify(address, resolve, reject);\r\n\t\telse\r\n\t\t\tresolve(null);\r\n\t})\r\n}\r\n","// Inspired from: https://reactjs.org/blog/2015/12/16/ismounted-antipattern.html\r\n\r\nexport class CancelablePromise {\r\n\tconstructor(promise) {\r\n\t\tthis.isCanceled = false;\r\n\t\tthis.promise = new Promise((resolve, reject) => {\r\n\t\t\tpromise.then(\r\n\t\t\t\tval => this.isCanceled ? reject({isCanceled: true}) : resolve(val),\r\n\t\t\t\terror => this.isCanceled ? reject({isCanceled: true}) : reject(error)\r\n\t\t\t);\r\n\t\t});\r\n\t\tthis.cancel = this.cancel.bind(this);\r\n\t}\r\n\r\n\tcancel() {\r\n\t\tthis.isCanceled = true;\r\n\t}\r\n}\r\n","function geolocationError(message) {\r\n\treturn {geolocationError: message};\r\n}\r\n\r\nexport function geotag() {\r\n\t// resolve(coords)\r\n\t// reject(errorMessage)\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tif (\"geolocation\" in navigator) {\r\n\t\t\tnavigator.geolocation.getCurrentPosition(function (position) {\r\n\t\t\t\tresolve(position.coords);\r\n\t\t\t}, function (error) {\r\n\t\t\t\tlet message = null;\r\n\t\t\t\tswitch (error.code) {\r\n\t\t\t\t\tcase error.PERMISSION_DENIED:\r\n\t\t\t\t\t\tmessage = \"Geolocation is not allowed in your browser.\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase error.POSITION_UNAVAILABLE:\r\n\t\t\t\t\t\tmessage = \"Location information is unavailable.\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase error.TIMEOUT:\r\n\t\t\t\t\t\tmessage = \"The request to get user location timed out.\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase error.UNKNOWN_ERROR:\r\n\t\t\t\t\t\tmessage = \"An unknown error occurred.\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tmessage = \"An error occurred without any error code.\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\treject(geolocationError(message));\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(geolocationError(\"Geolocation is not available in your browser.\"));\r\n\t\t}\r\n\t});\r\n}\r\n","export const FLOOD = [[45.7287996181,45.7207009011,-73.4481309563,-73.4352852957],[45.7287996181,45.7207009011,-73.4546822432,-73.4482594129],[45.7287996181,45.7207009011,-73.4612335301,-73.4548106998],[45.7287996181,45.7198910295,-73.4893655269,-73.4803735645],[45.7287996181,45.7198910295,-73.5086340179,-73.4957883572],[45.7287996181,45.7202509724,-73.5145430218,-73.5087624745],[45.7284396751,45.722140673,-73.5221219615,-73.5162129576],[45.7262800172,45.7173714286,-73.5007981649,-73.4879525042],[45.7227705732,45.7225906018,-73.5717062116,-73.5714492984],[45.7222306588,45.7133220702,-73.4676563604,-73.455067613],[45.7222306588,45.7133220702,-73.4718954285,-73.4677848171],[45.7210608441,45.7121522555,-73.544473411,-73.5372798411],[45.7208808726,45.7164715712,-73.5832673061,-73.5822396533],[45.7198010437,45.7108924551,-73.4867963948,-73.4742076474],[45.7198010437,45.7110724266,-73.5072209952,-73.4946322478],[45.7198010437,45.7117923125,-73.5136438255,-73.5073494518],[45.7196210722,45.7107124836,-73.4480024997,-73.4352852957],[45.7196210722,45.7107124836,-73.45442533,-73.4481309563],[45.7196210722,45.7107124836,-73.4608481603,-73.4545537866],[45.7188112005,45.7099026119,-73.4932192251,-73.4806304777],[45.7182712861,45.7093626975,-73.520323569,-73.5078632782],[45.7172814429,45.7083728543,-73.499770512,-73.4871817646],[45.7167415284,45.7078329398,-73.5340684259,-73.5231496144],[45.7164715712,45.7075629826,-73.5539791999,-73.5437026714],[45.7138619846,45.704953396,-73.5270033126,-73.5144145651],[45.7132320844,45.7043234958,-73.4672709906,-73.4546822432],[45.7132320844,45.7052233533,-73.4736938209,-73.4673994472],[45.7118822983,45.7029737097,-73.4801166513,-73.4675279038],[45.7106224979,45.7017139093,-73.4480024997,-73.4352852957],[45.7106224979,45.7017139093,-73.45442533,-73.4481309563],[45.7106224979,45.7017139093,-73.4608481603,-73.4545537866],[45.7099925977,45.7010840091,-73.4865394816,-73.4739507342],[45.7099925977,45.7010840091,-73.5061933423,-73.4936045949],[45.7099925977,45.7010840091,-73.5126161727,-73.5063217989],[45.7098126262,45.7009040376,-73.4930907685,-73.4862825684],[45.7090027545,45.7000941659,-73.5622004227,-73.5496116753],[45.708822783,45.6999141944,-73.5194243728,-73.5068356254],[45.7082828685,45.6993742799,-73.4995135988,-73.4869248514],[45.7082828685,45.6994642657,-73.593415378,-73.583652676],[45.7077429541,45.6988343655,-73.5348391656,-73.5222504181],[45.7073830111,45.6984744225,-73.568623253,-73.5560345056],[45.7048634103,45.6959548217,-73.5259756597,-73.5133869123],[45.7042335101,45.6965847219,-73.4672709906,-73.4546822432],[45.7042335101,45.6953249215,-73.4736938209,-73.4673994472],[45.7028837239,45.6939751353,-73.4801166513,-73.4690693831],[45.7016239235,45.6927153349,-73.4480024997,-73.4352852957],[45.7016239235,45.6927153349,-73.45442533,-73.4481309563],[45.7016239235,45.6927153349,-73.4602058773,-73.4545537866],[45.7013539663,45.6924453777,-73.5416473657,-73.5290586183],[45.7009940233,45.6920854347,-73.5059364291,-73.4933476817],[45.7009940233,45.698294451,-73.5123592594,-73.5060648857],[45.7008140518,45.6919054632,-73.4928338553,-73.4802451079],[45.7008140518,45.6919054632,-73.5557775924,-73.543188845],[45.7003641231,45.6914555345,-73.548070196,-73.5354814486],[45.7001841516,45.691275563,-73.6056187556,-73.5930300082],[45.7000041801,45.6910955915,-73.5622004227,-73.5496116753],[45.6999141944,45.6931652636,-73.5751745399,-73.5625857925],[45.6998242086,45.6924453777,-73.5187820898,-73.5124877161],[45.6997342229,45.6910955915,-73.5853226118,-73.5753029965],[45.6992842942,45.6903757056,-73.4965590969,-73.4867963948],[45.6987443797,45.6898357911,-73.53239849,-73.5198097426],[45.6983844367,45.6894758481,-73.5684947964,-73.5560345056],[45.6958648359,45.687766119,-73.5252049201,-73.5189105464],[45.6946950213,45.6857864327,-73.6155099143,-73.6029211669],[45.6946050355,45.6856964469,-73.4661148812,-73.4551960696],[45.6946050355,45.6879460905,-73.6456972168,-73.6331084694],[45.6942450925,45.6855164754,-73.6228319409,-73.6103716501],[45.6938851496,45.6861463756,-73.478575172,-73.4722807983],[45.6938851496,45.684976561,-73.4849980023,-73.4787036286],[45.6936151923,45.6897458054,-73.5917454422,-73.5821111967],[45.6936151923,45.6885759907,-73.6292547712,-73.6229603975],[45.6926253492,45.6837167606,-73.4480024997,-73.4352852957],[45.6926253492,45.6837167606,-73.45442533,-73.4481309563],[45.6926253492,45.6837167606,-73.4600774207,-73.4545537866],[45.6926253492,45.6868662616,-73.5981682725,-73.5918738988],[45.6923553919,45.6834468033,-73.5388213203,-73.5262325729],[45.691995449,45.6839867178,-73.5023396442,-73.4968160101],[45.6918154775,45.6829068889,-73.5544930263,-73.5419042789],[45.6913655488,45.6824569601,-73.5453726073,-73.5327838599],[45.6910955915,45.6874961618,-73.6027927103,-73.5982967291],[45.6910056058,45.6820970172,-73.4901362666,-73.482171957],[45.6910056058,45.6826369316,-73.5613012265,-73.548712479],[45.6910056058,45.688126062,-73.6329800128,-73.6293832278],[45.6906456628,45.6893858624,-73.6469817829,-73.6458256734],[45.6893858624,45.6851565324,-73.5682378832,-73.5614296831],[45.6889359337,45.6865063186,-73.5704216455,-73.5695224493],[45.6888459479,45.6799373593,-73.5322700334,-73.5218650483],[45.6855164754,45.6766078868,-73.4653441415,-73.4573798319],[45.6836267748,45.6747181862,-73.449543979,-73.4379828844],[45.6836267748,45.6747181862,-73.4559668093,-73.4496724356],[45.6836267748,45.6747181862,-73.4599489641,-73.4560952659],[45.6833568176,45.674448229,-73.5386928637,-73.5299578145],[45.6828169031,45.674448229,-73.5517954376,-73.5392066902],[45.6823669744,45.6734583858,-73.5451156941,-73.536637558],[45.6820070314,45.6730984428,-73.4887232439,-73.4823004136],[45.6820070314,45.6735483715,-73.4911639194,-73.4888517005],[45.6819170457,45.6755280579,-73.5000274252,-73.4982290328],[45.67759773,45.6686891414,-73.5582182679,-73.5456295205],[45.6757080294,45.6749881434,-73.5240488106,-73.5216081351],[45.6746282005,45.6657196118,-73.4480024997,-73.4356706655],[45.6746282005,45.6657196118,-73.45442533,-73.4481309563],[45.6746282005,45.6657196118,-73.4608481603,-73.4545537866],[45.6743582432,45.6654496546,-73.4672709906,-73.4546822432],[45.6734583858,45.6704888563,-73.5455010639,-73.53959206],[45.6734583858,45.6648197544,-73.5646410982,-73.5537222867],[45.6730084571,45.6640998685,-73.4885947873,-73.4762629531],[45.6724685426,45.663559954,-73.4939899647,-73.4824288702],[45.6721985854,45.6704888563,-73.5381790373,-73.5339399693],[45.6695889988,45.6606804102,-73.5710639285,-73.563741902],[45.6690490844,45.6601404957,-73.4736938209,-73.4611050735],[45.6687791271,45.6632899968,-73.6273279221,-73.6193636125],[45.6657196118,45.6571709662,-73.5774867588,-73.5683663398],[45.6656296261,45.6567210375,-73.4480024997,-73.4383682542],[45.6656296261,45.6567210375,-73.45442533,-73.4481309563],[45.6656296261,45.6567210375,-73.4608481603,-73.4545537866],[45.6656296261,45.6567210375,-73.4801166513,-73.4675279038],[45.6653596689,45.6564510803,-73.4672709906,-73.4546822432],[45.6640098827,45.6551012941,-73.4865394816,-73.4739507342],[45.6634699683,45.6545613796,-73.4915492892,-73.4803735645],[45.6619402106,45.653391565,-73.5839095892,-73.5776152155],[45.6611303389,45.6522217503,-73.5923877252,-73.5840380458],[45.66005051,45.6514118786,-73.4736938209,-73.4611050735],[45.6566310517,45.6477224631,-73.4496724356,-73.4370836881],[45.6566310517,45.6477224631,-73.4560952659,-73.4498008922],[45.6566310517,45.6477224631,-73.4801166513,-73.4675279038],[45.6563610945,45.6474525059,-73.4625180962,-73.4499293488],[45.6560911373,45.6475424917,-73.5988105555,-73.5863502647],[45.6550113084,45.6461027198,-73.4865394816,-73.4739507342],[45.6544713939,45.6455628053,-73.4884663307,-73.4803735645],[45.6528516505,45.6439430619,-73.6052333858,-73.5950853139],[45.6503320497,45.6414234611,-73.4689409265,-73.4563521791],[45.6499721067,45.6410635181,-73.6938684442,-73.6820504364],[45.6483523633,45.6394437747,-73.4480024997,-73.4352852957],[45.6483523633,45.6394437747,-73.6116562161,-73.5990674687],[45.6476324774,45.6387238888,-73.45442533,-73.4418365826],[45.6476324774,45.6387238888,-73.4753637568,-73.4627750094],[45.6473625202,45.6384539316,-73.4608481603,-73.4482594129],[45.6471825487,45.6382739601,-73.6180790464,-73.605490299],[45.646012734,45.6371041454,-73.4817865871,-73.4691978397],[45.6454728195,45.6365642309,-73.4882094175,-73.47562067],[45.6445729621,45.6356643735,-73.490650093,-73.4820435004],[45.6441230334,45.635484402,-73.6882163535,-73.6811512401],[45.6440330477,45.6398037177,-73.5499970451,-73.5413904525],[45.6438530762,45.6388138745,-73.6049764726,-73.5986820989],[45.6434031474,45.6344945588,-73.6245018768,-73.6119131293],[45.6413334753,45.6324248867,-73.4672709906,-73.4546822432],[45.6409735324,45.6407935609,-73.6892440063,-73.6883448101],[45.6404336179,45.6401636607,-73.5412619959,-73.5407481694],[45.639353789,45.6304452004,-73.4480024997,-73.4352852957],[45.639353789,45.6344945588,-73.6113993029,-73.6051049292],[45.638633903,45.6297253144,-73.45442533,-73.4427357788],[45.638633903,45.6297253144,-73.4736938209,-73.4611050735],[45.6383639458,45.6294553572,-73.4608481603,-73.4482594129],[45.6381839743,45.6313450578,-73.6178221332,-73.6115277595],[45.6380939886,45.6291854,-73.6319523599,-73.6193636125],[45.6370141597,45.6282855425,-73.4801166513,-73.4675279038],[45.6364742452,45.6282855425,-73.4865394816,-73.4802451079],[45.6355743878,45.6266657992,-73.4929623119,-73.4803735645],[45.6344045731,45.6267557849,-73.6242449635,-73.6179505898],[45.6335047157,45.624596127,-73.6383751902,-73.6257864428],[45.6321549295,45.6232463409,-73.4993851422,-73.4867963948],[45.6302652289,45.6213566403,-73.4672709906,-73.4546822432],[45.6300852574,45.6211766688,-73.4480024997,-73.4352852957],[45.6296353287,45.6271157279,-73.45442533,-73.4481309563],[45.6296353287,45.6207267401,-73.4736938209,-73.4611050735],[45.6293653715,45.6204567828,-73.4608481603,-73.4545537866],[45.6290954142,45.6220765262,-73.6306677939,-73.6243734202],[45.6272057136,45.618297125,-73.4801166513,-73.4682986435],[45.6272057136,45.618297125,-73.4865394816,-73.4802451079],[45.6265758134,45.6176672248,-73.4929623119,-73.4803735645],[45.6265758134,45.6176672248,-73.6418435186,-73.6322092731],[45.62495607,45.6160474814,-73.5058079725,-73.4932192251],[45.6245061413,45.6155975527,-73.5079917348,-73.5014404479],[45.6245061413,45.6155975527,-73.6370906242,-73.6307962505],[45.6242361841,45.615507567,-73.5447303242,-73.535995275],[45.6231563552,45.6142477665,-73.4993851422,-73.4867963948],[45.6215366118,45.6213566403,-73.6552030057,-73.6521200471],[45.6212666545,45.6123580659,-73.4672709906,-73.4567375489],[45.6211766688,45.6152376097,-73.5358668184,-73.5295724447],[45.6210866831,45.6128979804,-73.4464610204,-73.4352852957],[45.6202768114,45.6163174386,-73.5294439881,-73.5267463994],[45.6182071393,45.6092985506,-73.4742076474,-73.4616189],[45.6182071393,45.6092985506,-73.4806304777,-73.474336104],[45.6175772391,45.6086686504,-73.487053308,-73.4780613456],[45.6175772391,45.6086686504,-73.6433849979,-73.6361914279],[45.6159574957,45.6070489071,-73.5058079725,-73.4932192251],[45.6141577808,45.6052491922,-73.4934761383,-73.4808873909],[45.6124480517,45.6035394631,-73.5094047575,-73.4996420554],[45.6122680802,45.6033594916,-73.4631603792,-73.4505716318],[45.6120881087,45.6032695058,-73.4480024997,-73.4352852957],[45.6092085649,45.6002999763,-73.4695832095,-73.4576367452],[45.6086686504,45.5997600618,-73.4762629531,-73.4636742057],[45.6085786647,45.5996700761,-73.4846126325,-73.4720238851],[45.6085786647,45.5996700761,-73.646596413,-73.6403020393],[45.6069589213,45.5980503327,-73.4998989686,-73.4873102212],[45.6051592064,45.5962506178,-73.4910354628,-73.4784467154],[45.604619292,45.5958006891,-73.4573798319,-73.4455618242],[45.6034494773,45.5945408887,-73.5063217989,-73.4937330515],[45.6034494773,45.5945408887,-73.5097901273,-73.5064502556],[45.6016497624,45.5927411738,-73.6530192434,-73.6445411073],[45.6002099906,45.5913014019,-73.4711246888,-73.4584074848],[45.5996700761,45.5907614875,-73.4775475191,-73.4649587717],[45.5993101331,45.5914813734,-73.4839703495,-73.4776759757],[45.597960347,45.5890517584,-73.4974582931,-73.4848695457],[45.5964305893,45.5875220007,-73.6594420737,-73.6500647414],[45.5961606321,45.5872520435,-73.4903931798,-73.4778044323],[45.5960706463,45.5871620577,-73.8686978854,-73.8568798776],[45.5959806606,45.587072072,-73.7088978671,-73.6982359688],[45.594450903,45.5855423144,-73.5038811234,-73.491292376],[45.594450903,45.5855423144,-73.5103039537,-73.50400958],[45.5912114162,45.5823028276,-73.4769052361,-73.4641880321],[45.5911214305,45.5822128418,-73.7044018859,-73.6928407913],[45.590941459,45.5850923856,-73.8711385609,-73.8640734475],[45.5901315873,45.5812229987,-73.4839703495,-73.4726661681],[45.58986163,45.5871620577,-73.5243057238,-73.5192959162],[45.5889617726,45.580053184,-73.4968160101,-73.4842272627],[45.5889617726,45.580053184,-73.665864904,-73.6532761566],[45.587432015,45.5795132695,-73.6593136171,-73.6530192434],[45.5869820863,45.5816729274,-73.7081271275,-73.6997774481],[45.5865321575,45.5776235689,-73.5130015425,-73.5064502556],[45.5854523286,45.57654374,-73.4903931798,-73.4778044323],[45.5854523286,45.57654374,-73.5032388404,-73.490650093],[45.5854523286,45.57654374,-73.5081201914,-73.503367297],[45.5815829416,45.572674353,-73.6699755154,-73.6594420737],[45.5811330129,45.5734842247,-73.4826857834,-73.4699685794],[45.580413127,45.5727643388,-73.6318239033,-73.6221896578],[45.5799631983,45.5710546096,-73.4968160101,-73.4842272627],[45.5771736402,45.5696148377,-73.6220612012,-73.6147391747],[45.5764537543,45.5676351514,-73.4891086137,-73.4790889984],[45.5764537543,45.5675451656,-73.5032388404,-73.490650093],[45.5764537543,45.5675451656,-73.5096616707,-73.503367297],[45.5760938113,45.5671852227,-73.5162129576,-73.5036242102],[45.5743840822,45.5692548948,-73.6146107181,-73.6128123256],[45.5725843673,45.5681750659,-73.6684340361,-73.6621396624],[45.5725843673,45.570244738,-73.6711316249,-73.6685624927],[45.5710546096,45.562146021,-73.5213512219,-73.5100470405],[45.5709646239,45.5620560353,-73.495531444,-73.4892370703],[45.5674551799,45.5585465913,-73.5019542743,-73.4932192251],[45.5674551799,45.5585465913,-73.5083771047,-73.5020827309],[45.5670952369,45.5581866483,-73.514799935,-73.5022111875],[45.5620560353,45.5531474467,-73.5212227653,-73.5086340179],[45.5620560353,45.5531474467,-73.5253333767,-73.5213512219],[45.5584566056,45.5508978031,-73.5024681008,-73.4961737271],[45.5580966626,45.549188074,-73.5088909311,-73.5025965574],[45.5530574609,45.5441488723,-73.5153137614,-73.5045234065],[45.5530574609,45.5441488723,-73.5217365917,-73.515442218],[45.5530574609,45.5441488723,-73.528159422,-73.5218650483],[45.548108245,45.5391996564,-73.5345822523,-73.5219935049],[45.5440588866,45.5391096707,-73.5178828935,-73.5113316066],[45.5440588866,45.535150298,-73.5243057238,-73.5180113501],[45.541089357,45.5321807684,-73.5410050827,-73.5284163352],[45.5391096707,45.5302010821,-73.5307285541,-73.5194243728],[45.5328106686,45.52390208,-73.5437026714,-73.5348391656],[45.5320907827,45.5231821941,-73.5371513845,-73.5255902899],[45.5238120943,45.5149035057,-73.5435742148,-73.5309854674],[45.5232721798,45.5143635912,-73.5469140865,-73.5374082977],[45.5230922083,45.5141836197,-73.5318846636,-73.5227642446],[45.5155334059,45.5066248173,-73.5579613547,-73.5453726073],[45.5148135199,45.5059049313,-73.5383074939,-73.528159422],[45.5142736055,45.5053650169,-73.5447303242,-73.5321415768],[45.5142736055,45.5060849028,-73.5511531546,-73.5448587808],[45.514093634,45.5051850454,-73.5253333767,-73.519681286],[45.5077946319,45.4988860433,-73.5588605509,-73.5517954376],[45.5065348315,45.4976262429,-73.5520523508,-73.5449872375],[45.5058149456,45.496906357,-73.536637558,-73.5240488106],[45.5052750311,45.4963664425,-73.5429319317,-73.5304716409],[45.5052750311,45.4963664425,-73.5494832187,-73.5439595846],[45.5050950596,45.496186471,-73.5259756597,-73.5155706746],[45.4975362572,45.4912372551,-73.5571906151,-73.5452441507],[45.4971763142,45.489167583,-73.5628427057,-73.5573190717],[45.4968163712,45.4879077826,-73.53239849,-73.5198097426],[45.4960964853,45.4871878967,-73.5217365917,-73.5145430218],[45.4953765993,45.4864680107,-73.5388213203,-73.5262325729],[45.4953765993,45.4887176543,-73.5419042789,-73.538949777],[45.4878177969,45.4789092083,-73.528159422,-73.5155706746],[45.486378025,45.4774694364,-73.5345822523,-73.5219935049],[45.4857481248,45.4768395362,-73.5410050827,-73.5284163352],[45.4843983386,45.47548975,-73.5217365917,-73.5099185839],[45.4788192225,45.4699106339,-73.528159422,-73.5155706746],[45.4773794506,45.468470862,-73.5345822523,-73.5219935049],[45.4769295219,45.4708104913,-73.547427913,-73.5348391656],[45.4767495504,45.4678409618,-73.5347107089,-73.531113924],[45.4753997643,45.4664911757,-73.5162129576,-73.5055510593],[45.4733300922,45.4675710046,-73.5538507433,-73.5475563696],[45.4703605626,45.461451974,-73.5600166604,-73.5539791999],[45.4698206482,45.4609120596,-73.522635788,-73.5100470405],[45.4683808763,45.4594722877,-73.5290586183,-73.5164698708],[45.4677509761,45.4588423875,-73.5374082977,-73.5248195503],[45.4664011899,45.4574926013,-73.511845433,-73.5036242102],[45.4638815891,45.4549730005,-73.5426750185,-73.5312423806],[45.4613619883,45.4524533997,-73.5630996189,-73.5568052452],[45.4608220738,45.4519134852,-73.5182682633,-73.5056795159],[45.4593823019,45.4504737133,-73.5246910937,-73.5121023462],[45.4587524017,45.4498438131,-73.531113924,-73.5185251765],[45.4574026156,45.448494027,-73.5099185839,-73.5031103838],[45.4548830147,45.4459744261,-73.5375367543,-73.5249480069],[45.4548830147,45.4459744261,-73.5439595846,-73.5376652109],[45.454793029,45.4458844404,-73.5695224493,-73.5604020302],[45.4534432428,45.4445346542,-73.5503824149,-73.5377936675],[45.4518234995,45.4429149109,-73.5163414142,-73.5037526668],[45.4503837276,45.441475139,-73.5227642446,-73.5101754971],[45.4497538274,45.4408452387,-73.5291870749,-73.5165983275],[45.4484040412,45.4394954526,-73.5092763009,-73.5025965574],[45.4482240697,45.4393154811,-73.5568052452,-73.5442164978],[45.4466943121,45.4377857235,-73.5759452796,-73.5633565322],[45.4458844404,45.4369758518,-73.5356099052,-73.5230211578],[45.4458844404,45.4369758518,-73.5420327355,-73.5357383618],[45.4457944546,45.436885866,-73.5665679473,-73.5539791999],[45.4444446685,45.4355360799,-73.5484555658,-73.5358668184],[45.4424649821,45.4335563935,-73.5156991312,-73.5031103838],[45.4413851532,45.4324765646,-73.5221219615,-73.5095332141],[45.4412951675,45.4323865789,-73.5823681099,-73.5697793625],[45.440755253,45.4318466644,-73.5285447918,-73.5159560444],[45.4394054669,45.4304968782,-73.5087624745,-73.5022111875],[45.4392254954,45.4303169068,-73.5548783961,-73.5422896487],[45.4376957377,45.4287871491,-73.5729907776,-73.5604020302],[45.436885866,45.4279772774,-73.5401058864,-73.527517139],[45.4367958803,45.4278872917,-73.5613012265,-73.548712479],[45.4360759943,45.4271674057,-73.5887909402,-73.5762021928],[45.4354460941,45.4265375055,-73.5465287167,-73.5339399693],[45.4334664078,45.4245578192,-73.5151853048,-73.5029819272],[45.4323865789,45.4234779902,-73.5216081351,-73.5090193877],[45.4322965931,45.4233880045,-73.5760737362,-73.5668248605],[45.4317566787,45.42284809,-73.5280309654,-73.515442218],[45.4316666929,45.4227581043,-73.5952137705,-73.5841665024],[45.430226921,45.4213183324,-73.552951547,-73.5403627996],[45.4286971634,45.4197885748,-73.5677240568,-73.5551353094],[45.4278872917,45.4189787031,-73.5344537957,-73.5218650483],[45.4277973059,45.4188887173,-73.5593743774,-73.5467856299],[45.4260875768,45.4171789882,-73.540876626,-73.5282878786],[45.4244678334,45.4176289169,-73.5119738896,-73.5056795159],[45.4243778477,45.4232980188,-73.4819150437,-73.4753637568],[45.4233880045,45.4144794159,-73.5248195503,-73.5121023462],[45.4232980188,45.4143894302,-73.5741468871,-73.5615581397],[45.4231180473,45.4142094587,-73.5973975328,-73.5846803288],[45.4219482326,45.413039644,-73.5805697174,-73.56798097],[45.4212283467,45.412319758,-73.5472994564,-73.5347107089],[45.4206884322,45.4117798436,-73.5880202006,-73.5754314531],[45.419698589,45.4117798436,-73.5657972077,-73.5532084603],[45.4188887173,45.4099801287,-73.5312423806,-73.5186536332],[45.4187987316,45.409890143,-73.5566767886,-73.5440880412],[45.4170890025,45.409170257,-73.5376652109,-73.5313708372],[45.4143894302,45.4136695442,-73.5185251765,-73.5169836973],[45.4142994444,45.4089002998,-73.572220038,-73.5596312906],[45.4141194729,45.4101601002,-73.5923877252,-73.5796705212],[45.4129496583,45.4102500859,-73.5786428683,-73.5723484946],[45.4122297723,45.409170257,-73.5440880412,-73.5377936675],[45.4116898578,45.4103400717,-73.5795420646,-73.5787713249],[45.4107000147,45.409170257,-73.559502834,-73.5505108715],[45.4098001572,45.409170257,-73.5503824149,-73.5442164978]];","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {addGoogleMapLocationControl} from \"../api/googleMapLocationControl\";\r\nimport {CancelablePromise} from \"../api/cancelablePromise\";\r\nimport {geotag} from \"../api/geotag\";\r\nimport {FLOOD} from \"./flood_no_water_10\";\r\n\r\nfunction samePositions(pos1, pos2) {\r\n\treturn pos1.lat() === pos2.lat() && pos1.lng() === pos2.lng();\r\n}\r\n\r\nexport class GoogleView extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.currentAddress = null;\r\n\t\tthis.currentMarker = null;\r\n\t\tthis.streetPositionIsManual = false;\r\n\t\tthis.map = null;\r\n\t\tthis.places = null;\r\n\t\tthis.defaultPosition = null;\r\n\t\tthis.currentCircle = null;\r\n\t\tthis.allFlood = [];\r\n\t\tthis.geolocation = null;\r\n\t\tthis.userAddress = null;\r\n\t\tthis.displayStreet = this.displayStreet.bind(this);\r\n\t\tthis.displayMap = this.displayMap.bind(this);\r\n\t\tthis.markMapOn = this.markMapOn.bind(this);\r\n\t\tthis.centerMap = this.centerMap.bind(this);\r\n\t\tthis.centerStreet = this.centerStreet.bind(this);\r\n\t\tthis.getUserLocation = this.getUserLocation.bind(this);\r\n\t\tthis.onMapClick = this.onMapClick.bind(this);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (<div>\r\n\t\t\t<div id=\"google-map-view\" className=\"my-4\"/>\r\n\t\t</div>);\r\n\t}\r\n\r\n\tstreetIsVisible() {\r\n\t\treturn this.map.getStreetView().getVisible();\r\n\t}\r\n\r\n\tdisplayStreet() {\r\n\t\tconsole.log(`Displaying street.`);\r\n\t\tthis.streetPositionIsManual = true;\r\n\t\tthis.map.getStreetView().setVisible(true);\r\n\t}\r\n\r\n\tdisplayMap() {\r\n\t\tthis.map.getStreetView().setVisible(false);\r\n\t}\r\n\r\n\tsearchAddress(query, nearLocation) {\r\n\t\t// resolve(address)\r\n\t\t// reject(status)\r\n\t\tconst google = this.context.google;\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst request = {\r\n\t\t\t\tquery: query,\r\n\t\t\t\tfields: ['formatted_address', 'geometry', 'name'],\r\n\t\t\t\tlocationBias: new google.maps.Circle({\r\n\t\t\t\t\tcenter: nearLocation,\r\n\t\t\t\t\tradius: 10\r\n\t\t\t\t})\r\n\t\t\t};\r\n\t\t\tthis.places.findPlaceFromQuery(request, (results, status) => {\r\n\t\t\t\tif (status === google.maps.places.PlacesServiceStatus.OK && results.length)\r\n\t\t\t\t\tresolve(results[0].formatted_address);\r\n\t\t\t\telse\r\n\t\t\t\t\treject(status);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tmarkMapOn(position) {\r\n\t\tconst google = this.context.google;\r\n\t\tif (this.currentMarker) {\r\n\t\t\tthis.currentMarker.setMap(null);\r\n\t\t\tthis.currentMarker = null;\r\n\t\t}\r\n\t\t// if (!this.props.displayUserRegions || !samePositions(position, this.geolocation))\r\n\t\tthis.currentMarker = new google.maps.Marker({position: position, map: this.map});\r\n\t\tif (this.currentCircle) {\r\n\t\t\tthis.currentCircle.setMap(null);\r\n\t\t\tthis.currentCircle = null;\r\n\t\t}\r\n\t\tif (this.geolocation && this.props.displayUserRegions && samePositions(position, this.geolocation)) {\r\n\t\t\tthis.currentCircle = new google.maps.Circle({\r\n\t\t\t\tstrokeColor: '#00FF00',\r\n\t\t\t\tstrokeOpacity: 0.8,\r\n\t\t\t\tstrokeWeight: 2,\r\n\t\t\t\tfillColor: '#00FF00',\r\n\t\t\t\tfillOpacity: 0.35,\r\n\t\t\t\tmap: this.map,\r\n\t\t\t\tcenter: position,\r\n\t\t\t\tradius: 300, // in meters\r\n\t\t\t});\r\n\t\t\tthis.currentCircle.addListener('click', this.onMapClick);\r\n\t\t}\r\n\t}\r\n\r\n\tdrawFlood() {\r\n\t\tconst google = this.context.google;\r\n\t\tfor (let bounds of FLOOD) {\r\n\t\t\tconst rectangleBounds = {\r\n\t\t\t\tnorth: bounds[0],\r\n\t\t\t\tsouth: bounds[1],\r\n\t\t\t\twest: bounds[2],\r\n\t\t\t\teast: bounds[3],\r\n\t\t\t};\r\n\t\t\tconst rectangle = new google.maps.Rectangle({\r\n\t\t\t\tstrokeColor: '#33ccff',\r\n\t\t\t\tstrokeOpacity: 0.8,\r\n\t\t\t\tstrokeWeight: 2,\r\n\t\t\t\tfillColor: '#33ccff',\r\n\t\t\t\tfillOpacity: 0.35,\r\n\t\t\t\tmap: this.map,\r\n\t\t\t\tbounds: rectangleBounds\r\n\t\t\t});\r\n\t\t\trectangle.addListener('click', this.onMapClick);\r\n\t\t\tthis.allFlood.push(rectangle);\r\n\t\t}\r\n\t}\r\n\r\n\tonMapClick(ev) {\r\n\t\tconst position = ev.latLng;\r\n\t\tthis.centerMap(position);\r\n\t\tthis.context.locationToAddress(position)\r\n\t\t\t.then(address => {\r\n\t\t\t\tthis.currentAddress = address;\r\n\t\t\t\tthis.props.onSelect(address)\r\n\t\t\t});\r\n\t}\r\n\r\n\tcenterMap(position) {\r\n\t\tconsole.log(`Centering map to ${position.lat()} ; ${position.lng()}`);\r\n\t\tthis.markMapOn(position);\r\n\t\tthis.map.panTo(position);\r\n\t}\r\n\r\n\tcenterStreet(position) {\r\n\t\tconsole.log(`Centering street to ${position.lat()} ; ${position.lng()}`);\r\n\t\tthis.streetPositionIsManual = true;\r\n\t\tthis.map.getStreetView().setPosition(position);\r\n\t}\r\n\r\n\t_createMapOn(defaultPosition) {\r\n\t\tconst google = this.context.google;\r\n\t\tthis.map = new google.maps.Map(document.getElementById('google-map-view'), {\r\n\t\t\tcenter: defaultPosition,\r\n\t\t\tzoom: 15,\r\n\t\t\tstreetViewControl: false,\r\n\t\t});\r\n\t\tthis.places = new google.maps.places.PlacesService(this.map);\r\n\t\tthis.map.addListener('click', this.onMapClick);\r\n\t\tthis.map.getStreetView().addListener('position_changed', () => {\r\n\t\t\tif (this.streetPositionIsManual) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconsole.log(`Handling changed position on street.`);\r\n\t\t\tconst location = this.map.getStreetView().getLocation();\r\n\t\t\tthis.centerMap(location.latLng);\r\n\t\t\tthis.searchAddress(location.description, location.latLng)\r\n\t\t\t\t.then(address => {\r\n\t\t\t\t\tthis.currentAddress = address;\r\n\t\t\t\t\tthis.props.onSelect(address)\r\n\t\t\t\t});\r\n\t\t});\r\n\t\tconst streetControl = document.createElement('div');\r\n\t\tstreetControl.classList.add('google-map-street-button');\r\n\t\tstreetControl.textContent = 'Street';\r\n\t\tstreetControl.index = 1;\r\n\t\tstreetControl.addEventListener('click', () => {\r\n\t\t\tif (this.currentMarker) {\r\n\t\t\t\tconst position = this.currentMarker.getPosition();\r\n\t\t\t\tthis.centerStreet(position);\r\n\t\t\t\tthis.displayStreet();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.map.controls[google.maps.ControlPosition.TOP_LEFT].push(streetControl);\r\n\t\taddGoogleMapLocationControl(google, this.map, this.getUserLocation);\r\n\t\tdocument.getElementById('google-map-view').addEventListener('click', () => {\r\n\t\t\tif (this.streetIsVisible()) {\r\n\t\t\t\tconsole.log(`Clicked on street!`);\r\n\t\t\t\tthis.streetPositionIsManual = false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// Initialization.\r\n\t\tconst google = this.context.google;\r\n\t\t// Use Montreal coordinates as default coordinates.\r\n\t\tconst defaultPosition = new google.maps.LatLng(45.505331312, -73.55249779);\r\n\t\tthis.defaultPosition = defaultPosition;\r\n\t\tif (this.props.address) {\r\n\t\t\tthis.context.addressToLocation(this.props.address)\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tconsole.log(`Error while location for address ${this.props.address}:`, error);\r\n\t\t\t\t\treturn this.defaultPosition;\r\n\t\t\t\t})\r\n\t\t\t\t.then(position => {\r\n\t\t\t\t\tthis.currentAddress = this.props.address;\r\n\t\t\t\t\tthis._createMapOn(position);\r\n\t\t\t\t\tthis.centerMap(position);\r\n\t\t\t\t\tthis.centerStreet(position);\r\n\t\t\t\t\tthis.displayMap();\r\n\t\t\t\t})\r\n\t\t} else {\r\n\t\t\tthis._createMapOn(defaultPosition);\r\n\t\t\tthis.displayMap();\r\n\t\t\tif (this.props.guessInitialLocation) {\r\n\t\t\t\tthis.drawFlood();\r\n\t\t\t\tthis.getUserLocation();\r\n\t\t\t} else {\r\n\t\t\t\tthis.centerMap(defaultPosition);\r\n\t\t\t\tthis.centerStreet(defaultPosition);\r\n\t\t\t\tthis.context.locationToAddress(defaultPosition)\r\n\t\t\t\t\t.then(address => {\r\n\t\t\t\t\t\tthis.currentAddress = address;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\r\n\t\tif (!this.props.address\r\n\t\t\t|| prevProps.address === this.props.address\r\n\t\t\t|| this.currentAddress === this.props.address)\r\n\t\t\treturn;\r\n\t\tthis.context.addressToLocation(this.props.address)\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.log(`Error while location for address ${this.props.address}:`, error);\r\n\t\t\t\treturn this.defaultPosition;\r\n\t\t\t})\r\n\t\t\t.then(position => {\r\n\t\t\t\tthis.currentAddress = this.props.address;\r\n\t\t\t\tif (this.streetIsVisible())\r\n\t\t\t\t\tthis.centerStreet(position);\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.centerMap(position);\r\n\t\t\t})\r\n\t}\r\n\r\n\tgetUserLocation() {\r\n\t\tif (this.cancelablePromise)\r\n\t\t\treturn;\r\n\t\tthis.cancelablePromise = new CancelablePromise(geotag());\r\n\t\tthis.cancelablePromise\r\n\t\t\t.promise\r\n\t\t\t.then((coords) => {\r\n\t\t\t\tif (!this.streetIsVisible()) {\r\n\t\t\t\t\tconsole.log(`Geolocation returned ${coords.latitude} ${coords.longitude}`);\r\n\t\t\t\t\tconst position = new this.context.google.maps.LatLng(coords.latitude, coords.longitude);\r\n\t\t\t\t\tthis.geolocation = position;\r\n\t\t\t\t\tthis.centerMap(position);\r\n\t\t\t\t\tthis.context.locationToAddress(position)\r\n\t\t\t\t\t\t.then(address => {\r\n\t\t\t\t\t\t\tthis.currentAddress = address;\r\n\t\t\t\t\t\t\tthis.userAddress = address;\r\n\t\t\t\t\t\t\tthis.props.onSelect(address);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif ('isCanceled' in error) {\r\n\t\t\t\t\tconsole.error('Geolocation was canceled.');\r\n\t\t\t\t} else if (\"geolocationError\" in error) {\r\n\t\t\t\t\tconsole.error(`Geolocation error. ${error.geolocationError}`);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.error(`Error when getting user location.`);\r\n\t\t\t\t\tconsole.exception(error);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.cancelablePromise = null;\r\n\t\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.cancelablePromise)\r\n\t\t\tthis.cancelablePromise.cancel();\r\n\t}\r\n}\r\n\r\nGoogleView.contextType = AppContext;\r\nGoogleView.propTypes = {\r\n\taddress: PropTypes.string.isRequired,\r\n\tonSelect: PropTypes.func.isRequired,\r\n\tguessInitialLocation: PropTypes.bool,\r\n\tdisplayUserRegions: PropTypes.bool\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\n\r\nexport function addGoogleMapLocationControl(google, map, onClick) {\r\n\tconst geolocationControl = document.createElement('div');\r\n\tgeolocationControl.title = 'Center near my current location';\r\n\tgeolocationControl.classList.add('google-map-geolocation-button');\r\n\tgeolocationControl.index = 1;\r\n\tgeolocationControl.addEventListener('click', onClick);\r\n\t// Mylocation icon reference: (2019/09/04) https://www.materialui.co/icon/my-location\r\n\tReactDOM.render((\r\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n\t\t\t<path d=\"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z\"/>\r\n\t\t</svg>\r\n\t), geolocationControl);\r\n\tmap.controls[google.maps.ControlPosition.RIGHT_CENTER].push(geolocationControl);\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {Search} from \"./search\";\r\nimport {promiseGanify} from \"../api/ganify\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {GoogleView} from \"./GoogleView\";\r\nimport {RingLoader} from \"react-spinners\";\r\n\r\nexport class AddressManager extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst initialAddress = props.initialAddress || '';\r\n\t\tthis.state = {\r\n\t\t\t// search\r\n\t\t\taddress: initialAddress,\r\n\t\t\tplaces: [],\r\n\t\t\tcurrentFocus: -1,\r\n\t\t\tautocomplete: true,\r\n\t\t\tautocompleteHasFocus: false,\r\n\t\t\terror: '',\r\n\t\t\twait: false,\r\n\t\t\t// address manager\r\n\t\t\tselectedAddress: initialAddress\r\n\t\t};\r\n\t\tthis.onSearchChange = this.onSearchChange.bind(this);\r\n\t\tthis.onSelectSearchAddress = this.onSelectSearchAddress.bind(this);\r\n\t\tthis.onSearchSubmit = this.onSearchSubmit.bind(this);\r\n\t\tthis.onSelectMapAddress = this.onSelectMapAddress.bind(this);\r\n\t\tthis.onSubmitted = this.onSubmitted.bind(this);\r\n\t}\r\n\r\n\tsetState(state) {\r\n\t\treturn new Promise(resolve => super.setState(state, resolve));\r\n\t}\r\n\r\n\tonSelectMapAddress(address) {\r\n\t\tconsole.log(`Selected from map: ${address}`);\r\n\t\treturn this.setState({selectedAddress: address, address: address, error: ''});\r\n\t}\r\n\r\n\tonSelectSearchAddress(address) {\r\n\t\tconsole.log(`Selected from search; ${address}`);\r\n\t\treturn this.setState({selectedAddress: address, error: ''});\r\n\t}\r\n\r\n\tonSearchChange(newState) {\r\n\t\treturn this.setState(newState);\r\n\t}\r\n\r\n\tonSubmitted(address, result) {\r\n\t\tif (this.props.onSubmitted)\r\n\t\t\treturn this.props.onSubmitted(address, result);\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonSearchSubmit(address) {\r\n\t\treturn this.onSelectSearchAddress(address)\r\n\t\t\t.then(() => this.setState({wait: true}))\r\n\t\t\t.then(() => promiseGanify(address))\r\n\t\t\t.then(result => this.setState({wait: false}).then(() => this.onSubmitted(address, result)))\r\n\t\t\t.catch(error => this.setState({\r\n\t\t\t\twait: false,\r\n\t\t\t\terror: `Image processing error: ${error}`\r\n\t\t\t}).then(() => this.onSubmitted(address, null)));\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Search search={this.state}\r\n\t\t\t\t\t\tonChange={this.onSearchChange}\r\n\t\t\t\t\t\tonSelect={this.onSelectSearchAddress}\r\n\t\t\t\t\t\tonSubmit={this.onSearchSubmit}/>\r\n\t\t\t\t{this.state.error ? <div className=\"error-message pt-4 px-2\">{this.state.error}</div> : ''}\r\n\t\t\t\t<div className={`text-center search-waiting-${this.state.wait ? 'yes' : 'no'}`}>\r\n\t\t\t\t\t<div><RingLoader css={{margin: \"auto\"}}/></div>\r\n\t\t\t\t\t<div className=\"mt-3\">\r\n\t\t\t\t\t\t<strong>We are computing predictions. This may take some seconds ...</strong>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{this.props.showMap ?\r\n\t\t\t\t\t<GoogleView address={this.state.selectedAddress}\r\n\t\t\t\t\t\t\t\tonSelect={this.onSelectMapAddress}\r\n\t\t\t\t\t\t\t\tguessInitialLocation={this.props.guessInitialLocation}\r\n\t\t\t\t\t\t\t\tdisplayUserRegions={this.props.displayUserRegions}/>\r\n\t\t\t\t\t: ''}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAddressManager.propTypes = {\r\n\tonSubmitted: PropTypes.func,\r\n\tinitialAddress: PropTypes.string,\r\n\tshowMap: PropTypes.bool,\r\n\tguessInitialLocation: PropTypes.bool,\r\n\tdisplayUserRegions: PropTypes.bool\r\n};\r\nAddressManager.contextType = AppContext;\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\nimport {ExternalLink} from \"../components/ExternalLink\";\r\n\r\nexport class FloodModels extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'flood-models'} title={'Flood Models'}>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tExtreme weather is hard to predict, especially 30 years in the future and given the impacts that\r\n\t\t\t\t\tclimate change will have on our weather systems (see â€œHow Climate Change Causes Floodingâ€).\r\n\t\t\t\t\tNonetheless, scientists around the world have been working on mapping out and quantifying the\r\n\t\t\t\t\tscale and extent of future flooding.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tWe base ourselves on previous research done by research groups globally to estimate the probability,\r\n\t\t\t\t\tfrequency and depth of flooding in North America depending on <ExternalLink\r\n\t\t\t\t\thref={'https://en.wikipedia.org/wiki/Representative_Concentration_Pathway'}>\r\n\t\t\t\t\tdifferent global warming scenarios</ExternalLink>.\r\n\t\t\t\t\tWe present this data in a visual way in order to raise awareness of the extent to which climate\r\n\t\t\t\t\tchange will affect locations worldwide.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>Data sources and further information:</p>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><ExternalLink href={'https://agupubs.onlinelibrary.wiley.com/doi/pdf/10.1002/2016EF000485'}>Global\r\n\t\t\t\t\t\tprojections of river flood risk in a warmer world</ExternalLink></li>\r\n\t\t\t\t\t<li><ExternalLink href={'https://swot.jpl.nasa.gov/mission.htm'}>NASA SWOT mission</ExternalLink>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li><ExternalLink href={'https://data.jrc.ec.europa.eu/dataset/jrc-liscoast-10009'}>European Coastal\r\n\t\t\t\t\t\tFlood Risk</ExternalLink></li>\r\n\t\t\t\t\t<li><ExternalLink href={'http://www.nsercfloodnet.ca/home'}>NSERC FloodNet</ExternalLink></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nFloodModels.contextType = AppContext;\r\nFloodModels.pageName = 'FloodModels';\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\nimport {ExternalLink} from \"../components/ExternalLink\";\r\n\r\nexport class Glossary extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'glossary'} title={'Glossary'}>\r\n\t\t\t\t<p>This section will present some of the important concepts to better understand climate change:</p>\r\n\r\n\t\t\t\t<h4>CO<sub>2</sub></h4>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tAt the center of the climate crisis is a commonplace but very important concept: that of carbon\r\n\t\t\t\t\tdioxide (CO<sub>2</sub>), low amounts of which occur naturally in the Earth's atmosphere, but its\r\n\t\t\t\t\tconcentration has been rapidly increasing due to human activity. This increase is dangerous because\r\n\t\t\t\t\tof CO<sub>2</sub>â€™s effect as a greenhouse gas, meaning that it absorbs and emits infrared radiation\r\n\t\t\t\t\tin the wavelength range emitted by the Earth, which contributes to the global warming of the planet\r\n\t\t\t\t\t(<ExternalLink href={'https://www.ipcc.ch/site/assets/uploads/2018/02/WGIIAR5-AnnexII_FINAL.pdf'}>\r\n\t\t\t\t\tIPCC Glossary</ExternalLink>).\r\n\t\t\t\t</p>\r\n\t\t\t\t<hr/>\r\n\r\n\t\t\t\t<h4>CO<sub>2</sub> eq.</h4>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tSince other gases such as methane, nitrous oxide or even water vapor also have this warming effect,\r\n\t\t\t\t\ta standardized measure for describing how much warming a given amount of gas will have is often\r\n\t\t\t\t\tprovided in CO<sub>2</sub>-equivalents (CO<sub>2</sub>eq), for simplification purposes. For\r\n\t\t\t\t\tinstance, the carbon intensity of transportation is measured in grams of CO<sub>2</sub>-equivalent\r\n\t\t\t\t\tper person-km, whereas the carbon intensity of energy is measured in grams of\r\n\t\t\t\t\tCO<sub>2</sub>-equivalent per kilowatt hour.\r\n\t\t\t\t</p>\r\n\t\t\t\t<hr/>\r\n\r\n\t\t\t\t<h4>Renewable vs. Nonrenewable Energy</h4>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tA key distinction to be made is that between renewable and nonrenewable energy sources. Renewable\r\n\t\t\t\t\tenergy is collected from sources which are naturally replenished on a human timescale: this\r\n\t\t\t\t\tincludes wind, sunlight, tides, geothermal heat, etc. In contrast, nonrenewable energy sources\r\n\t\t\t\t\tsuch as coal and petrol are not naturally replenished after their usage, and can take millions of\r\n\t\t\t\t\tyears to be formed again. Finally, not all renewable energy sources are carbon-free, since the\r\n\t\t\t\t\tburning of biomass (such as plants or algae) still produces CO<sub>2</sub>-equivalents.\r\n\t\t\t\t</p>\r\n\t\t\t\t<hr/>\r\n\r\n\t\t\t\t<h4>Carbon Offsetting</h4>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tCarbon offsetting is a reduction in emissions of CO<sub>2</sub>-equivalents that is made in order to\r\n\t\t\t\t\tcompensate for the emissions made by another actor. The money paid via carbon offsetting is\r\n\t\t\t\t\tinvested towards different types of projects, including renewable energy or energy efficiency,\r\n\t\t\t\t\tcarbon sequestration, methane abatement, among others. These projects are run by private companies,\r\n\t\t\t\t\tmore often than not in a different place than where the offsetting is carried out. A large part of\r\n\t\t\t\t\tcarbon offsetting goes towards funding renewable energy projects such as building wind or solar\r\n\t\t\t\t\tfarms, hydroelectric dams, and extracting biofuel, in the hopes of reducing the cost of\r\n\t\t\t\t\trenewable production.\r\n\t\t\t\t</p>\r\n\t\t\t\t<hr/>\r\n\r\n\t\t\t\t<h4>Renewable Energy Credits</h4>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tAn indirect form of offsetting that is often used by large companies is the purchasing of Renewable\r\n\t\t\t\t\tEnergy Credits (RECs), which involves directly purchasing quantities of energy produced by renewable\r\n\t\t\t\t\tsources. This is considered to be an indirect of offsetting because in order to convert RECs into\r\n\t\t\t\t\toffsets, the energy purchased is translated into carbon reductions under the assumption that the\r\n\t\t\t\t\tclean energy is displacing an equivalent amount of electricity produced by non-renewable methods.\r\n\t\t\t\t\tOther commonly used forms of carbon offsetting include reforestation, sequestration, replacement of\r\n\t\t\t\t\tlegacy equipment such as coal-burning stoves by more modern ones, etc.\r\n\t\t\t\t</p>\r\n\t\t\t\t<hr/>\r\n\r\n\t\t\t\t<h4>Carbon Neutral</h4>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tâ€˜Carbon Neutralâ€™ is a term used to indicate a net zero carbon footprint of an individual or\r\n\t\t\t\t\torganization. While a small part of carbon-neutral entities rely entirely on renewable energy that\r\n\t\t\t\t\tis zero-carbon, the large majority of entities balance their emissions of CO<sub>2</sub>-equivalents,\r\n\t\t\t\t\tusing approaches such as carbon offsetting or the purchase of RECs. Many major technology companies\r\n\t\t\t\t\tsuch as Google and Microsoft are carbon-neutral, matching 100% of their electricity use with\r\n\t\t\t\t\trenewable energy purposes (Google, 2018; Microsoft, 2018). This does not mean, however, that their\r\n\t\t\t\t\toperations do not produce CO<sub>2</sub>-equivalents, since this is dependent on the energy sources\r\n\t\t\t\t\tof the locations in which their infrastructure is located.\r\n\t\t\t\t</p>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nGlossary.contextType = AppContext;\r\nGlossary.pageName = 'Glossary';\r\n","export function stringToBase64(str) {\r\n\treturn btoa(encodeURIComponent(str));\r\n}\r\n\r\nexport function getPageName(component) {\r\n\treturn component.pageName;\r\n}\r\n\r\nexport function getPageLink(component) {\r\n\tif (component.pageLink !== undefined) {\r\n\t\treturn component.pageLink;\r\n\t}\r\n\tlet pageName = getPageName(component);\r\n\tlet link = pageName.replace(/[A-Z]{2,}/g, (value) => `${value.charAt(0)}-${value.charAt(1)}`);\r\n\tlink = link.replace(/([a-z0-9])([A-Z])/g, '$1-$2');\r\n\treturn '/' + link.toLocaleLowerCase();\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from \"react-router-dom\";\r\nimport {getPageLink, getPageName} from \"../api/utils\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\n\r\nexport class InternalLink extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.register = this.register.bind(this);\r\n\t}\r\n\r\n\tregister() {\r\n\t\tthis.context.registerPage(this.props.page);\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.currentPageName === getPageName(this.props.page))\r\n\t\t\treturn this.props.children;\r\n\t\treturn (\r\n\t\t\t<Link className={`${this.props.removeDefaultClass ? '' : 'internal-link'} ${this.props.className || ''}`}\r\n\t\t\t\t  to={getPageLink(this.props.page)}\r\n\t\t\t\t  onClick={this.register}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</Link>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nInternalLink.propTypes = {\r\n\tpage: PropTypes.oneOfType([PropTypes.object, PropTypes.func]).isRequired,\r\n\tclassName: PropTypes.string,\r\n\tremoveDefaultClass: PropTypes.bool,\r\n\tcurrentPageName: PropTypes.string,\r\n};\r\nInternalLink.contextType = AppContext;\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\nimport {ExternalLink} from \"../components/ExternalLink\";\r\nimport {Glossary} from \"./glossary\";\r\nimport {InternalLink} from \"../components/internalLink\";\r\n\r\nexport class HowClimateChangeCausesFlooding extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'how-climate-change-causes-flooding'} title={'How Climate Change Causes Flooding'}>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tRising global temperatures impact weather patterns globally. On one hand, more heat causes more\r\n\t\t\t\t\tevaporation, which rises into the atmosphere and can provoke more intense rainfall and storms.\r\n\t\t\t\t\tOn the other, more heat also causes rising sea levels, which can in turn lead to higher storm\r\n\t\t\t\t\tsurges and more flooding.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tClick <InternalLink page={Glossary}>here</InternalLink> to\r\n\t\t\t\t\tlearn about key terms and concepts linked to climate change.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>To learn more about changing flood patterns and flood predictions, check out the following links:</p>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><ExternalLink\r\n\t\t\t\t\t\thref={'https://www.nrdc.org/stories/flooding-and-climate-change-everything-you-need-know'}>Flooding\r\n\t\t\t\t\t\tand Climate Change: Everything You Need to Know (NRDC)</ExternalLink></li>\r\n\t\t\t\t\t<li><ExternalLink href={'https://changingclimate.ca/CCCR2019/chapter/4-0/'}>Changes in Temperature\r\n\t\t\t\t\t\tand Precipitation Across Canada (CCCR2019)</ExternalLink></li>\r\n\t\t\t\t\t<li><ExternalLink\r\n\t\t\t\t\t\thref={'https://climate.nasa.gov/news/2881/earths-freshwater-future-extremes-of-flood-and-drought/'}>Earth's\r\n\t\t\t\t\t\tFreshwater Future: Extremes of Flood and Drought (NASA)</ExternalLink></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nHowClimateChangeCausesFlooding.contextType = AppContext;\r\nHowClimateChangeCausesFlooding.pageName = 'HowClimateChangeCausesFlooding';\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport PropTypes from 'prop-types';\r\nimport {WhatYouCanDo} from \"./whatYouCanDo\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\nimport {AddressManager} from \"../components/AddressManager\";\r\nimport ReactCompareImage from 'react-compare-image';\r\nimport {FloodModels} from \"./floodModels\";\r\nimport {HowClimateChangeCausesFlooding} from \"./howClimateChangeCausesFlooding\";\r\nimport {InternalLink} from \"../components/internalLink\";\r\n\r\nexport class GanifyResult extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst address = GanifyResult.getInitialAddress(props, '');\r\n\t\tconst result = GanifyResult.getInitialResult(props, '');\r\n\t\tthis.state = {\r\n\t\t\taddress: address,\r\n\t\t\timage: result.original ? `data:image/jpeg;base64,${result.original}` : null,\r\n\t\t\tflooded: (result.flooded || result.original) ? `data:image/jpeg;base64,${result.flooded || result.original}` : null,\r\n\t\t\tmetadata: result.metadata,\r\n\t\t\twarning: result.warning,\r\n\t\t\terror: result.error\r\n\t\t};\r\n\t\tthis.onSubmitted = this.onSubmitted.bind(this);\r\n\t}\r\n\r\n\tstatic getInitialAddress(props, defaultValue) {\r\n\t\tif (props.initialAddress !== undefined)\r\n\t\t\treturn props.initialAddress;\r\n\t\tif (props.location !== undefined)\r\n\t\t\treturn props.location.state.initialAddress;\r\n\t\treturn defaultValue;\r\n\t}\r\n\r\n\tstatic getInitialResult(props, defaultValue) {\r\n\t\tif (props.initialResult !== undefined)\r\n\t\t\treturn props.initialResult;\r\n\t\tif (props.location !== undefined)\r\n\t\t\treturn props.location.state.initialResult;\r\n\t\treturn defaultValue;\r\n\t}\r\n\r\n\tsetState(state) {\r\n\t\treturn new Promise(resolve => super.setState(state, resolve));\r\n\t}\r\n\r\n\tonSubmitted(address, result) {\r\n\t\tif (!result)\r\n\t\t\treturn false;\r\n\t\tconst header = 'data:application/json;base64,';\r\n\t\tresult = JSON.parse(atob(result.substr(header.length)));\r\n\t\treturn this.setState({\r\n\t\t\taddress: address,\r\n\t\t\timage: result.original ? `data:image/jpeg;base64,${result.original}` : null,\r\n\t\t\tflooded: (result.flooded || result.original) ? `data:image/jpeg;base64,${result.flooded || result.original}` : null,\r\n\t\t\tmetadata: result.metadata,\r\n\t\t\twarning: result.warning,\r\n\t\t\terror: result.error\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst address = this.state.address;\r\n\t\tconst metadata = this.state.metadata ? Object.values(this.state.metadata) : null;\r\n\t\tif (metadata)\r\n\t\t\tmetadata.sort((m1, m2) => m1.title.localeCompare(m2.title));\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'ganify'} title={address ? `${address}` : `Scenario`}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-md-6\">\r\n\t\t\t\t\t\t<AddressManager showMap={true}\r\n\t\t\t\t\t\t\t\t\t\tinitialAddress={this.state.address}\r\n\t\t\t\t\t\t\t\t\t\tonSubmitted={this.onSubmitted}/>\r\n\t\t\t\t\t\t{this.state.image ? (\r\n\t\t\t\t\t\t\tthis.state.warning ? (\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t{this.state.warning ? <p className=\"warning-message\">{this.state.warning}</p> : ''}\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\tAccording to <InternalLink page={FloodModels}>climate predictions in\r\n\t\t\t\t\t\t\t\t\t\t2050</InternalLink>,\r\n\t\t\t\t\t\t\t\t\t\tthis location is not at risk of experiencing flooding.\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t{/* TODO Link to closest location that is flooded (if Mike or me (notoraptor) can do that) */}\r\n\t\t\t\t\t\t\t\t\t\tThat doesnâ€™t mean that it wonâ€™t be affected!\r\n\t\t\t\t\t\t\t\t\t\tClick <strong><em><u>here</u></em></strong> to find the closest\r\n\t\t\t\t\t\t\t\t\t\tlocation that is liable to be flooded,\r\n\t\t\t\t\t\t\t\t\t\tand <InternalLink page={HowClimateChangeCausesFlooding}>\r\n\t\t\t\t\t\t\t\t\t\there</InternalLink> to learn about how climate change will affect global weather\r\n\t\t\t\t\t\t\t\t\t\tpatterns.\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\tThis projection is based on the â€˜Business as usualâ€™ scenario\r\n\t\t\t\t\t\t\t\t\t\t(3 degrees warming). But this isnâ€™t guaranteed to happen!\r\n\t\t\t\t\t\t\t\t\t\tClick <InternalLink page={WhatYouCanDo}>\r\n\t\t\t\t\t\t\t\t\t\there</InternalLink> to learn what you can do to fight climate change!\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\tAccording to <InternalLink page={FloodModels}>\r\n\t\t\t\t\t\t\t\t\t\tclimate predictions in 2050</InternalLink>, this location is at risk of\r\n\t\t\t\t\t\t\t\t\t\texperiencing ___ cm of flooding with an average time between floods of _____.\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\tWhat this means is that you have a __ % chance of experiencing this kind of\r\n\t\t\t\t\t\t\t\t\t\tflooding in 2050, and ____ % chance of experiencing it in the 10 years\r\n\t\t\t\t\t\t\t\t\t\taround 2050.\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\tThis projection is based on the â€˜no changeâ€™ scenario (3 degrees warming).\r\n\t\t\t\t\t\t\t\t\t\tBut you can change this!\r\n\t\t\t\t\t\t\t\t\t\tClick <InternalLink page={WhatYouCanDo}>here\r\n\t\t\t\t\t\t\t\t\t</InternalLink> to learn what you can do to fight climate change!\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-md-6 text-center\">\r\n\t\t\t\t\t\t{this.state.image ? (\r\n\t\t\t\t\t\t\t<ReactCompareImage key={`${address}${Math.random()}`}\r\n\t\t\t\t\t\t\t\t\t\t\t   leftImage={this.state.image}\r\n\t\t\t\t\t\t\t\t\t\t\t   rightImage={this.state.flooded}\r\n\t\t\t\t\t\t\t\t\t\t\t   leftImageAlt={'Original image'}\r\n\t\t\t\t\t\t\t\t\t\t\t   rightImageAlt={'Modified image'}/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className=\"no-image\">Nothing to show</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{this.state.error ? <div className=\"error-message pt-4 px-2\">{this.state.error}</div> : ''}\r\n\t\t\t\t\t\t{metadata ? (\r\n\t\t\t\t\t\t\t<div className=\"my-4 metadata\">{metadata.map((entry, i) => (\r\n\t\t\t\t\t\t\t\t<div className=\"row\" key={i}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-md-8 metadata-title\">{entry.title}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-md-4 metadata-value\">{entry.value || 'N/A'}</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}</div>\r\n\t\t\t\t\t\t) : ''}\r\n\t\t\t\t\t\t<div className=\"my-4\">\r\n\t\t\t\t\t\t\t<InternalLink className=\"btn btn-secondary btn-lg px-5\"\r\n\t\t\t\t\t\t\t\t\t\t  page={WhatYouCanDo}\r\n\t\t\t\t\t\t\t\t\t\t  removeDefaultClass={true}>\r\n\t\t\t\t\t\t\t\t<strong>Make it change : have an impact</strong>\r\n\t\t\t\t\t\t\t</InternalLink>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nGanifyResult.propTypes = {\r\n\t// location may be sent by react-router\r\n\tlocation: PropTypes.object,\r\n\tinitialAddress: PropTypes.string,\r\n\tinitialResult: PropTypes.object\r\n};\r\nGanifyResult.contextType = AppContext;\r\nGanifyResult.pageName = 'GanifyResult';\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\nimport {ExternalLink} from \"../components/ExternalLink\";\r\n\r\nexport class Contact extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'contact'} title={'Contact Us'}>\r\n\t\t\t\t<p>For more information about the project, see our <ExternalLink\r\n\t\t\t\t\thref={'https://mila.quebec/en/ai-society/visualizing-climate-change/'}>website</ExternalLink>.</p>\r\n\t\t\t\t<p>To get in touch, please contact us at <ExternalLink\r\n\t\t\t\t\thref={'mailto:ccai@mila.quebec'}>ccai@mila.quebec</ExternalLink></p>\r\n\t\t\t\t<p>We also have a Slack workspace which we can add you to if you want to get involved!</p>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nContact.contextType = AppContext;\r\nContact.pageName = 'Contact';\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\nimport {ExternalLink} from \"../components/ExternalLink\";\r\nimport {Contact} from \"./contact\";\r\nimport {InternalLink} from \"../components/internalLink\";\r\n\r\nexport class RelatedEfforts extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'related-efforts'} title={'Related Efforts'}>\r\n\t\t\t\t<p>Check out some amazing initiatives around the world:</p>\r\n\r\n\t\t\t\t<p><ExternalLink href={'https://climatechange.ai'}>Climate Change AI</ExternalLink></p>\r\n\r\n\t\t\t\t<p><ExternalLink href={'https://www.microsoft.com/en-us/ai/ai-for-earth'}>Microsoft AI for\r\n\t\t\t\t\tEarth</ExternalLink></p>\r\n\r\n\t\t\t\t<p><ExternalLink href={'https://deepempathy.mit.edu/'}>Deep Empathy (MIT)</ExternalLink></p>\r\n\r\n\t\t\t\t<p><ExternalLink href={'https://stanfordmlgroup.github.io/programs/aicc-bootcamp/'}>AI for Climate\r\n\t\t\t\t\tChange Bootcamp (MIT)</ExternalLink></p>\r\n\r\n\t\t\t\t<p><InternalLink page={Contact}>Contact us</InternalLink> to add\r\n\t\t\t\t\tyour project here!</p>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nRelatedEfforts.contextType = AppContext;\r\nRelatedEfforts.pageName = 'RelatedEfforts';\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\nimport {ExternalLink} from \"../components/ExternalLink\";\r\nimport {RelatedEfforts} from \"./relatedEfforts\";\r\nimport {InternalLink} from \"../components/internalLink\";\r\n\r\nexport class AboutMachineLearning extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'machine-learning'} title={'About the Machine Learning We Use'}>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tGiven a training set, Generative Adversarial Networks (GANs) learn to generate new data with the\r\n\t\t\t\t\tsame statistical distribution as that set. For example, a GAN trained on many images of people can\r\n\t\t\t\t\tlearn how to â€˜inventâ€™ new people who <ExternalLink href={'https://thispersondoesnotexist.com/'}>\r\n\t\t\t\t\tdonâ€™t actually exist</ExternalLink> but who look very realistic.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tWe trained our GAN on over a thousand real images of flooded houses and streets, as well as several\r\n\t\t\t\t\tthousand simulated ones. This helped the GAN â€˜learnâ€™ what needs to be changed in an image in order\r\n\t\t\t\t\tto transform a non-flooded location to a flooded one.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tWhile our transformation will never be 100% realistic, our aim is to help you imagine what the\r\n\t\t\t\t\tlocation you chose may look like if it were impacted by a severe flood.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>More about GANs:</p>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><ExternalLink href={'https://en.wikipedia.org/wiki/Generative_adversarial_network'}>Wikipedia\r\n\t\t\t\t\t\tarticle</ExternalLink></li>\r\n\t\t\t\t\t<li><ExternalLink\r\n\t\t\t\t\t\thref={'https://towardsdatascience.com/understanding-generative-adversarial-networks-gans-cd6e4651a29'}>Understanding\r\n\t\t\t\t\t\tGenerative Adversarial Networks (GANs)</ExternalLink></li>\r\n\t\t\t\t\t<li><ExternalLink href={'https://papers.nips.cc/paper/5423-generative-adversarial-nets.pdf'}>Original\r\n\t\t\t\t\t\tGAN paper</ExternalLink> (published at NeurIPS 2014)\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<p>More information about our approach:</p>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><ExternalLink href={'https://arxiv.org/abs/1905.03709'}>Visualizing the Consequences of Climate\r\n\t\t\t\t\t\tChange Using Cycle-Consistent Adversarial Networks</ExternalLink></li>\r\n\t\t\t\t\t<li><ExternalLink href={'https://github.com/cc-ai/kdb'}>Our GitHub repository</ExternalLink></li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<p>Click <InternalLink page={RelatedEfforts}>here</InternalLink> to learn more\r\n\t\t\t\t\tabout efforts related to ours.</p>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAboutMachineLearning.contextType = AppContext;\r\nAboutMachineLearning.pageName = 'AboutMachineLearning';\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\nimport {FloodModels} from \"./floodModels\";\r\nimport {AboutMachineLearning} from \"./aboutMachineLearning\";\r\nimport {InternalLink} from \"../components/internalLink\";\r\n\r\nexport class HowItWorks extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'how'} title={'How it works'}>\r\n\t\t\t\t<p>Our project has 2 main parts:</p>\r\n\t\t\t\t<ol>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<strong>The flood model:</strong> these output the probability and the water height of\r\n\t\t\t\t\t\tflooding at the location you entered. These outputs are based on many variables including\r\n\t\t\t\t\t\tprecipitation, relative humidity, and temperature, and how these are likely to change in\r\n\t\t\t\t\t\t2050 due to the consequences of climate change.\r\n\t\t\t\t\t\tFor more information on our flood models,\r\n\t\t\t\t\t\tclick <InternalLink page={FloodModels}>here</InternalLink>.\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<strong>The Generative Adversarial Network:</strong> generative adversarial networks, or GANs,\r\n\t\t\t\t\t\tare a type of machine learning system that is made from two neural networks, which are\r\n\t\t\t\t\t\tcompeting with each other : one tries to generate plausible images to fool the other.\r\n\t\t\t\t\t\tThe other tries to differentiate real and generated examples, and not let itself be fooled.\r\n\t\t\t\t\t\tWe harness GANs to transform images of non-flooded locations to flooded\r\n\t\t\t\t\t\tones - click <InternalLink page={AboutMachineLearning}>here</InternalLink> to find out how!\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ol>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tIn a nutshell, when you enter a location, we query our flood model to get its climate prediction in\r\n\t\t\t\t\t2050. We then take the Google StreetView image of the location and we transform it based on\r\n\t\t\t\t\tthis prediction using our GAN.\r\n\t\t\t\t</p>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nHowItWorks.contextType = AppContext;\r\nHowItWorks.pageName = 'HowItWorks';\r\n","import React from \"react\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {StaticPage} from \"../components/StaticPage\";\r\nimport {ExternalLink} from \"../components/ExternalLink\";\r\nimport {AboutMachineLearning} from \"./aboutMachineLearning\";\r\nimport {FloodModels} from \"./floodModels\";\r\nimport {HowItWorks} from \"./howItWorks\";\r\nimport {InternalLink} from \"../components/internalLink\";\r\n\r\nexport class About extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<StaticPage name={'about'} title={'About the project'}>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tThe CCAI project is an interdisciplinary effort led by Prof.\r\n\t\t\t\t\tYoshua Bengio at <ExternalLink href={\"https://mila.quebec/\"}>Mila Quebec AI Institute</ExternalLink>.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tUsing the latest techniques from <InternalLink page={AboutMachineLearning}>\r\n\t\t\t\t\tMachine Learning</InternalLink> and <InternalLink page={FloodModels}>\r\n\t\t\t\t\tClimate Science</InternalLink>, we are working on creating images of accurate, vivid, and\r\n\t\t\t\t\tpersonalized outcomes of climate change.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tOur goal is to raise awareness and conceptual understanding of climate change by bringing the\r\n\t\t\t\t\tfuture closer. As a prototype, we first focus on modeling flood consequences on homes.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tFor more information on the project, click <InternalLink page={HowItWorks}>here</InternalLink>.\r\n\t\t\t\t</p>\r\n\t\t\t</StaticPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAbout.contextType = AppContext;\r\nAbout.pageName = 'About';\r\n","import React from \"react\";\r\nimport {HowItWorks} from \"./howItWorks\";\r\nimport {AppContext} from \"../contexts/AppContext\";\r\nimport {Helmet} from 'react-helmet-async';\r\nimport {Content} from \"../components/content\";\r\nimport {AddressManager} from \"../components/AddressManager\";\r\nimport {GanifyResult} from \"./ganifyResult\";\r\nimport {withRouter} from 'react-router-dom';\r\nimport {getPageLink} from \"../api/utils\";\r\nimport {InternalLink} from \"../components/internalLink\";\r\n\r\nexport class HomeComponent extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onSubmitted = this.onSubmitted.bind(this);\r\n\t}\r\n\r\n\tsetState(state) {\r\n\t\treturn new Promise(resolve => super.setState(state, resolve));\r\n\t}\r\n\r\n\tonSubmitted(address, result) {\r\n\t\tif (result) {\r\n\t\t\tconst header = 'data:application/json;base64,';\r\n\t\t\tresult = JSON.parse(atob(result.substr(header.length)));\r\n\t\t\tthis.props.history.push(getPageLink(GanifyResult), {\r\n\t\t\t\tinitialAddress: address,\r\n\t\t\t\tinitialResult: result\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.props.history.push(getPageLink(GanifyResult), {\r\n\t\t\t\tinitialAddress: address,\r\n\t\t\t\tinitialResult: {}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Content className=\"home\">\r\n\t\t\t\t<Helmet>\r\n\t\t\t\t\t<title>Welcome! | CC-AI</title>\r\n\t\t\t\t</Helmet>\r\n\t\t\t\t<div className=\"top-text text-center text-md-left\">\r\n\t\t\t\t\tVisualizing the Impacts of Climate Change\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-md-7 pr-md-5\">\r\n\t\t\t\t\t\t<div className=\"my-5\">\r\n\t\t\t\t\t\t\t<AddressManager onSubmitted={this.onSubmitted}\r\n\t\t\t\t\t\t\t\t\t\t\tshowMap={true}\r\n\t\t\t\t\t\t\t\t\t\t\tguessInitialLocation={true}\r\n\t\t\t\t\t\t\t\t\t\t\tdisplayUserRegions={true}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<InternalLink page={HowItWorks} className=\"learn-more btn btn-secondary p-3 mb-4\">\r\n\t\t\t\t\t\t\t\tLearn more about the science\r\n\t\t\t\t\t\t\t</InternalLink>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-md-5 text-justify my-5\">\r\n\t\t\t\t\t\t<div className=\"right-text\">\r\n\t\t\t\t\t\t\tEnter a location of your choice and see how it could look like in 2050,\r\n\t\t\t\t\t\t\tbased on the predictions made by climate models.\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Content>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nHomeComponent.contextType = AppContext;\r\nHomeComponent.pageName = 'Home';\r\nHomeComponent.pageLink = '/';\r\n\r\nconst Home = withRouter(HomeComponent);\r\nexport {Home};\r\n","import React from 'react';\r\nimport {Logo} from \"./components/logo\";\r\nimport {GanifyResult} from \"./pages/ganifyResult\";\r\nimport {RelatedEfforts} from \"./pages/relatedEfforts\";\r\nimport {AppContext, AppContextInstance} from \"./contexts/AppContext\";\r\nimport Script from 'react-load-script';\r\nimport {getPageLink, getPageName} from \"./api/utils\";\r\nimport {BrowserRouter as Router, Route, Switch} from \"react-router-dom\";\r\nimport {InternalLink} from \"./components/internalLink\";\r\n\r\nimport {AboutMachineLearning} from \"./pages/aboutMachineLearning\";\r\nimport {About} from \"./pages/about\";\r\nimport {Contact} from \"./pages/contact\";\r\nimport {FloodModels} from \"./pages/floodModels\";\r\nimport {Glossary} from \"./pages/glossary\";\r\nimport {Home} from \"./pages/home\";\r\nimport {HowClimateChangeCausesFlooding} from \"./pages/howClimateChangeCausesFlooding\";\r\nimport {HowItWorks} from \"./pages/howItWorks\";\r\nimport {WhatYouCanDo} from \"./pages/whatYouCanDo\";\r\n\r\nexport class App extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.registerPage = this.registerPage.bind(this);\r\n\t\tthis.getPageName = this.getPageName.bind(this);\r\n\t\tthis.loadGoogleContext = this.loadGoogleContext.bind(this);\r\n\t\tthis.state = {\r\n\t\t\tname: null,\r\n\t\t\tcontext: new AppContextInstance(null, null)\r\n\t\t};\r\n\t}\r\n\r\n\tgetPageName() {\r\n\t\treturn this.state.name;\r\n\t}\r\n\r\n\tregisterPage(component) {\r\n\t\tthis.setState({name: getPageName(component)});\r\n\t}\r\n\r\n\tloadGoogleContext() {\r\n\t\tthis.setState({context: new AppContextInstance(this.registerPage, window.google)});\r\n\t}\r\n\r\n\tmenu(title, content) {\r\n\t\tconst active = getPageName(content) === this.getPageName();\r\n\t\treturn (\r\n\t\t\t<InternalLink className={`dropdown-item ${active ? 'disabled' : ''}`} page={content}>\r\n\t\t\t\t{title}\r\n\t\t\t</InternalLink>\r\n\t\t);\r\n\t}\r\n\r\n\tnavMenu(title, content) {\r\n\t\tconst active = getPageName(content) === this.getPageName();\r\n\t\treturn (\r\n\t\t\t<li className={`nav-item ${active ? 'active' : ''}`}>\r\n\t\t\t\t<InternalLink className=\"nav-link link\" page={content}>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t\t{active ? (<span className=\"sr-only\">(current)</span>) : ''}\r\n\t\t\t\t</InternalLink>\r\n\t\t\t</li>\r\n\t\t);\r\n\t}\r\n\r\n\troute(content) {\r\n\t\treturn <Route exact path={getPageLink(content)} component={content}/>;\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Router>\r\n\t\t\t\t<AppContext.Provider value={this.state.context}>\r\n\t\t\t\t\t{this.state.context.google ? (\r\n\t\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t\t<nav className=\"navbar navbar-expand-lg navbar-light\">\r\n\t\t\t\t\t\t\t\t<div className=\"logo navbar-brand\">\r\n\t\t\t\t\t\t\t\t\t<InternalLink page={Home} className={'link'} currentPageName={this.getPageName()}>\r\n\t\t\t\t\t\t\t\t\t\t<Logo/>\r\n\t\t\t\t\t\t\t\t\t</InternalLink>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\r\n\t\t\t\t\t\t\t\t\t\tdata-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\"\r\n\t\t\t\t\t\t\t\t\t\taria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"navbar-toggler-icon\"/>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n\t\t\t\t\t\t\t\t\t<ul className=\"navbar-nav ml-auto\">\r\n\t\t\t\t\t\t\t\t\t\t{this.navMenu('Home', Home)}\r\n\t\t\t\t\t\t\t\t\t\t<li className=\"nav-item dropdown\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"nav-link dropdown-toggle link\" id=\"navbarDropdown\"\r\n\t\t\t\t\t\t\t\t\t\t  role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t  aria-expanded=\"false\">\r\n\t\t\t\t\t\t\t\t\t\tAbout\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.menu('About the project', About)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.menu('Flood Models', FloodModels)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.menu('About the Machine Learning We Use', AboutMachineLearning)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.menu('How Climate Change Causes Flooding', HowClimateChangeCausesFlooding)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.menu('Glossary', Glossary)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.menu('Related Efforts', RelatedEfforts)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t{this.navMenu('How it works', HowItWorks)}\r\n\t\t\t\t\t\t\t\t\t\t{this.navMenu('What you can do', WhatYouCanDo)}\r\n\t\t\t\t\t\t\t\t\t\t{this.navMenu('Contact Us', Contact)}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t\t{this.route(About)}\r\n\t\t\t\t\t\t\t\t\t{this.route(AboutMachineLearning)}\r\n\t\t\t\t\t\t\t\t\t{this.route(Contact)}\r\n\t\t\t\t\t\t\t\t\t{this.route(FloodModels)}\r\n\t\t\t\t\t\t\t\t\t{this.route(GanifyResult)}\r\n\t\t\t\t\t\t\t\t\t{this.route(Glossary)}\r\n\t\t\t\t\t\t\t\t\t{this.route(Home)}\r\n\t\t\t\t\t\t\t\t\t{this.route(HowClimateChangeCausesFlooding)}\r\n\t\t\t\t\t\t\t\t\t{this.route(HowItWorks)}\r\n\t\t\t\t\t\t\t\t\t{this.route(RelatedEfforts)}\r\n\t\t\t\t\t\t\t\t\t{this.route(WhatYouCanDo)}\r\n\t\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : ''}\r\n\t\t\t\t\t<Script async defer\r\n\t\t\t\t\t\t\turl={`https://maps.googleapis.com/maps/api/js?key=${process.env.REACT_APP_GOOGLE_API_KEY}&libraries=places`}\r\n\t\t\t\t\t\t\tonLoad={this.loadGoogleContext}/>\r\n\t\t\t\t</AppContext.Provider>\r\n\t\t\t</Router>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/js/bootstrap.js';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './index.css';\r\nimport {App} from './App';\r\nimport {HelmetProvider} from \"react-helmet-async\";\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<HelmetProvider><App/></HelmetProvider>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}